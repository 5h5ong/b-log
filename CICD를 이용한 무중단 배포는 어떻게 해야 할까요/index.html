<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta data-react-helmet="true" name="google-site-verification" content="hXzBIUorkHEVsO9Jb_mIDuDqsTRSzyOx9rvhZ3GrZj8"/><meta name="generator" content="Gatsby 4.6.2"/><style data-href="/b-log/styles.b776309b4decf2925be2.css" data-identity="gatsby-global-css">code[class*=language-],pre[class*=language-]{word-wrap:normal;background:none;color:#f8f8f2;font-family:Fira Code,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none;line-height:1.5;-o-tab-size:4;tab-size:4;text-align:left;white-space:pre;word-break:normal;word-spacing:normal}pre[class*=language-]{border-radius:.3em;margin:.5em 0;overflow:auto;padding:1em}:not(pre)>code[class*=language-],pre[class*=language-]{background:#2e3440}:not(pre)>code[class*=language-]{border-radius:.3em;padding:.1em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#636f88}.token.punctuation{color:#81a1c1}.namespace{opacity:.7}.token.constant,.token.deleted,.token.property,.token.symbol,.token.tag{color:#81a1c1}.token.number{color:#b48ead}.token.boolean{color:#81a1c1}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#a3be8c}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url,.token.variable{color:#81a1c1}.token.atrule,.token.attr-value,.token.class-name,.token.function{color:#88c0d0}.token.keyword{color:#81a1c1}.token.important,.token.regex{color:#ebcb8b}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}</style><style type="text/css">
    .anchor.before {
      position: absolute;
      top: 0;
      left: 0;
      transform: translateX(-100%);
      padding-right: 4px;
    }
    .anchor.after {
      display: inline-block;
      padding-left: 4px;
    }
    h1 .anchor svg,
    h2 .anchor svg,
    h3 .anchor svg,
    h4 .anchor svg,
    h5 .anchor svg,
    h6 .anchor svg {
      visibility: hidden;
    }
    h1:hover .anchor svg,
    h2:hover .anchor svg,
    h3:hover .anchor svg,
    h4:hover .anchor svg,
    h5:hover .anchor svg,
    h6:hover .anchor svg,
    h1 .anchor:focus svg,
    h2 .anchor:focus svg,
    h3 .anchor:focus svg,
    h4 .anchor:focus svg,
    h5 .anchor:focus svg,
    h6 .anchor:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop
          var clientTop = document.documentElement.clientTop || document.body.clientTop || 0
          var offset = element.getBoundingClientRect().top + scrollTop - clientTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><link rel="alternate" type="application/rss+xml" title="b:Log Rss Feed" href="/b-log/rss.xml"/><link rel="sitemap" type="application/xml" href="/b-log/sitemap/sitemap-index.xml"/><style data-styled="" data-styled-version="5.3.3">.nvvNn{position:relative;left:100%;padding-left:4rem;line-height:2.25rem;}/*!sc*/
.nvvNn ul{list-style-type:none;padding-left:1rem;}/*!sc*/
.nvvNn li{margin:0px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;}/*!sc*/
.nvvNn p{margin:0px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;}/*!sc*/
.nvvNn a{--tw-text-opacity:1;color:rgba(75,85,99,var(--tw-text-opacity));font-size:0.875rem;line-height:1.25rem;-webkit-text-decoration:none;text-decoration:none;}/*!sc*/
.nvvNn a:hover{--tw-text-opacity:1;color:rgba(17,24,39,var(--tw-text-opacity));}/*!sc*/
data-styled.g1[id="Toc__Container-sc-9zrjd9-0"]{content:"nvvNn,"}/*!sc*/
.dmEqLl{position:fixed;width:18rem;height:50%;border-radius:1.5rem;padding:1.25rem;overflow-y:auto;box-shadow:20px 20px 60px #d9d9d9,-20px -20px 60px #ffffff;}/*!sc*/
data-styled.g2[id="Toc__Contents-sc-9zrjd9-1"]{content:"dmEqLl,"}/*!sc*/
.jQTdsB{--tw-text-opacity:1;color:rgba(0,0,0,var(--tw-text-opacity));-webkit-text-decoration:none;text-decoration:none;}/*!sc*/
.jQTdsB:hover{--tw-text-opacity:1;color:rgba(75,85,99,var(--tw-text-opacity));}/*!sc*/
data-styled.g3[id="StyledLink-sc-3uouk6-0"]{content:"jQTdsB,"}/*!sc*/
.rWuXm{font-size:0.875rem;line-height:1.25rem;--tw-text-opacity:1;color:rgba(156,163,175,var(--tw-text-opacity));}/*!sc*/
data-styled.g4[id="Tag__TagStyledLink-sc-1hcx1ww-0"]{content:"rWuXm,"}/*!sc*/
.gOnOul{margin-right:0.5rem;}/*!sc*/
.gOnOul:last-child{margin:0px;}/*!sc*/
data-styled.g5[id="gaps__GapHorizontality-sc-1ekq037-0"]{content:"gOnOul,"}/*!sc*/
.kyIceB{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;font-size:3rem;line-height:1;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;margin-bottom:4rem;}/*!sc*/
data-styled.g6[id="BlogTitle__StyledH1-sc-15e6xzu-0"]{content:"kyIceB,"}/*!sc*/
.evzjD{margin-top:5rem;margin-bottom:8rem;}/*!sc*/
data-styled.g7[id="BlogHeader__HeaderContainer-sc-svto0z-0"]{content:"evzjD,"}/*!sc*/
.AYgxb{margin-top:10rem;margin-bottom:10rem;}/*!sc*/
data-styled.g8[id="blog-post__Container-sc-bktxku-0"]{content:"AYgxb,"}/*!sc*/
.bWWXUD{max-width:768px;margin:auto;}/*!sc*/
data-styled.g9[id="blog-post__SectionContainer-sc-bktxku-1"]{content:"bWWXUD,"}/*!sc*/
.dgABOP{max-width:1024px;margin:auto;margin-bottom:7rem;}/*!sc*/
data-styled.g10[id="blog-post__Header-sc-bktxku-2"]{content:"dgABOP,"}/*!sc*/
.kmNTJS{margin-bottom:0px;font-size:3.75rem;line-height:1;}/*!sc*/
data-styled.g11[id="blog-post__PostTitle-sc-bktxku-3"]{content:"kmNTJS,"}/*!sc*/
.ktKOFE ul{padding-left:1.75rem;line-height:2rem;list-style-type:none;}/*!sc*/
.ktKOFE ul li:before{content:'Â»';margin-right:0.5rem;--tw-text-opacity:1;color:rgba(156,163,175,var(--tw-text-opacity));}/*!sc*/
.ktKOFE ol{padding-left:1.75rem;line-height:2rem;}/*!sc*/
.ktKOFE p{font-size:1.125rem;line-height:1.75rem;}/*!sc*/
.ktKOFE code{font-size:0.875rem;line-height:1.25rem;}/*!sc*/
.ktKOFE table{table-layout:auto;padding:1.25rem;border-radius:0.75rem;margin:auto;border-width:1px;--tw-border-opacity:1;border-color:rgba(156,163,175,var(--tw-border-opacity));border-style:solid;}/*!sc*/
.ktKOFE th{padding-bottom:1rem;border-width:0px;border-bottom-width:1px;--tw-border-opacity:1;border-color:rgba(229,231,235,var(--tw-border-opacity));border-style:solid;}/*!sc*/
.ktKOFE td{padding:0.75rem;--tw-text-opacity:1;color:rgba(75,85,99,var(--tw-text-opacity));font-size:0.875rem;line-height:1.25rem;}/*!sc*/
.ktKOFE blockquote{margin-left:1rem;margin-right:1rem;padding-left:0.5rem;border-width:0px;border-left-width:4px;border-style:solid;--tw-border-opacity:1;border-color:rgba(156,163,175,var(--tw-border-opacity));}/*!sc*/
.ktKOFE .gatsby-resp-image-figcaption{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;margin-top:0.5rem;font-size:0.875rem;line-height:1.25rem;--tw-text-opacity:1;color:rgba(107,114,128,var(--tw-text-opacity));}/*!sc*/
.ktKOFE h1{font-size:3rem;line-height:1;}/*!sc*/
.ktKOFE h1:before{content:'#';--tw-text-opacity:1;color:rgba(209,213,219,var(--tw-text-opacity));margin-left:-1.6rem;}/*!sc*/
.ktKOFE h2{font-size:2.25rem;line-height:2.5rem;}/*!sc*/
.ktKOFE h2:before{content:'##';--tw-text-opacity:1;color:rgba(209,213,219,var(--tw-text-opacity));margin-left:-2.4rem;}/*!sc*/
.ktKOFE h3{font-size:1.875rem;line-height:2.25rem;}/*!sc*/
.ktKOFE h3:before{content:'###';--tw-text-opacity:1;color:rgba(209,213,219,var(--tw-text-opacity));margin-left:-3rem;}/*!sc*/
.ktKOFE h4{font-size:1.5rem;line-height:2rem;}/*!sc*/
.ktKOFE h4:before{content:'####';--tw-text-opacity:1;color:rgba(209,213,219,var(--tw-text-opacity));margin-left:-3.1rem;}/*!sc*/
.ktKOFE h5{font-size:1.25rem;line-height:1.75rem;}/*!sc*/
.ktKOFE h5:before{content:'#####';--tw-text-opacity:1;color:rgba(209,213,219,var(--tw-text-opacity));margin-left:-3.3rem;}/*!sc*/
.ktKOFE h6{font-size:1.125rem;line-height:1.75rem;}/*!sc*/
.ktKOFE h6:before{content:'######';--tw-text-opacity:1;color:rgba(209,213,219,var(--tw-text-opacity));margin-left:-3.5rem;}/*!sc*/
data-styled.g12[id="blog-post__Section-sc-bktxku-4"]{content:"ktKOFE,"}/*!sc*/
</style><title data-react-helmet="true">b:Log | CI/CDë¥¼ ì´ìš©í•œ ë¬´ì¤‘ë‹¨ ë°°í¬ëŠ” ì–´ë–»ê²Œ í•´ì•¼ í• ê¹Œìš”? feat.Nextjs</title><style>.gatsby-image-wrapper{position:relative;overflow:hidden}.gatsby-image-wrapper picture.object-fit-polyfill{position:static!important}.gatsby-image-wrapper img{bottom:0;height:100%;left:0;margin:0;max-width:none;padding:0;position:absolute;right:0;top:0;width:100%;object-fit:cover}.gatsby-image-wrapper [data-main-image]{opacity:0;transform:translateZ(0);transition:opacity .25s linear;will-change:opacity}.gatsby-image-wrapper-constrained{display:inline-block;vertical-align:top}</style><noscript><style>.gatsby-image-wrapper noscript [data-main-image]{opacity:1!important}.gatsby-image-wrapper [data-placeholder-image]{opacity:0!important}</style></noscript><script type="module">const e="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;e&&document.body.addEventListener("load",(function(e){if(void 0===e.target.dataset.mainImage)return;if(void 0===e.target.dataset.gatsbyImageSsr)return;const t=e.target;let a=null,n=t;for(;null===a&&n;)void 0!==n.parentNode.dataset.gatsbyImageWrapper&&(a=n.parentNode),n=n.parentNode;const o=a.querySelector("[data-placeholder-image]"),r=new Image;r.src=t.currentSrc,r.decode().catch((()=>{})).then((()=>{t.style.opacity=1,o&&(o.style.opacity=0,o.style.transition="opacity 500ms linear")}))}),!0);</script><link as="script" rel="preload" href="/b-log/webpack-runtime-76465a399045a41f636f.js"/><link as="script" rel="preload" href="/b-log/framework-2c67c8bfa55bfd760b60.js"/><link as="script" rel="preload" href="/b-log/app-423680434a9201db7ee2.js"/><link as="script" rel="preload" href="/b-log/8c818aafd19f020a43cdd28cb6a1c8df7d18c0d2-0fdccc7611a7c55272d7.js"/><link as="script" rel="preload" href="/b-log/component---src-templates-blog-post-js-549bf8357642c940d19b.js"/><link as="fetch" rel="preload" href="/b-log/page-data/CICDë¥¼ ì´ìš©í•œ ë¬´ì¤‘ë‹¨ ë°°í¬ëŠ” ì–´ë–»ê²Œ í•´ì•¼ í• ê¹Œìš”/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/b-log/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="BlogHeader__HeaderContainer-sc-svto0z-0 evzjD"><a class="StyledLink-sc-3uouk6-0 jQTdsB" href="/b-log/"><h1 class="BlogTitle__StyledH1-sc-15e6xzu-0 kyIceB">b:LOG</h1></a></div><div class="blog-post__Container-sc-bktxku-0 AYgxb"><header class="blog-post__Header-sc-bktxku-2 dgABOP"><h1 class="blog-post__PostTitle-sc-bktxku-3 kmNTJS">CI/CDë¥¼ ì´ìš©í•œ ë¬´ì¤‘ë‹¨ ë°°í¬ëŠ” ì–´ë–»ê²Œ í•´ì•¼ í• ê¹Œìš”? feat.Nextjs</h1><span class="gaps__GapHorizontality-sc-1ekq037-0 gOnOul"><span>June 05, 2022</span></span><span class="gaps__GapHorizontality-sc-1ekq037-0 gOnOul"><a class="StyledLink-sc-3uouk6-0 Tag__TagStyledLink-sc-1hcx1ww-0 jQTdsB rWuXm" href="/b-log/tags/aws">#<!-- -->aws</a></span><span class="gaps__GapHorizontality-sc-1ekq037-0 gOnOul"><a class="StyledLink-sc-3uouk6-0 Tag__TagStyledLink-sc-1hcx1ww-0 jQTdsB rWuXm" href="/b-log/tags/guide">#<!-- -->guide</a></span></header><div class="blog-post__SectionContainer-sc-bktxku-1 bWWXUD"><div class="Toc__Container-sc-9zrjd9-0 nvvNn"><div class="Toc__Contents-sc-9zrjd9-1 dmEqLl"><ul>
<li>
<p><a href="#intro">Intro</a></p>
</li>
<li>
<p><a href="#%EC%9D%B4%EB%A0%87%EA%B2%8C-%EB%8F%8C%EC%95%84%EA%B0%91%EB%8B%88%EB%8B%A4">ì´ë ‡ê²Œ ëŒì•„ê°‘ë‹ˆë‹¤</a></p>
</li>
<li>
<p><a href="#%EC%A4%80%EB%B9%84%EB%AC%BC">ì¤€ë¹„ë¬¼</a></p>
</li>
<li>
<p><a href="#docker">Docker</a></p>
<ul>
<li>
<p><a href="#%EC%84%A4%EC%B9%98">ì„¤ì¹˜</a></p>
</li>
<li>
<p><a href="#dockerfile">Dockerfile</a></p>
<ul>
<li><a href="#enable-standalone-option">enable standalone option</a></li>
</ul>
</li>
<li>
<p><a href="#docker-compose">docker-compose</a></p>
<ul>
<li><a href="#%EC%84%A4%EC%B9%98-1">ì„¤ì¹˜</a></li>
<li><a href="#%EC%84%A4%EB%AA%85">ì„¤ëª…</a></li>
</ul>
</li>
</ul>
</li>
<li>
<p><a href="#github-actions">Github Actions</a></p>
<ul>
<li><a href="#environments">Environments</a></li>
<li><a href="#%EC%84%A4%EB%AA%85-1">ì„¤ëª…</a></li>
</ul>
</li>
<li>
<p><a href="#shell-scripts">Shell Scripts</a></p>
<ul>
<li><a href="#build_dockersh">build_docker.sh</a></li>
<li><a href="#switch_dockersh">switch_docker.sh</a></li>
</ul>
</li>
<li>
<p><a href="#aws">AWS</a></p>
<ul>
<li>
<p><a href="#ec2-%EC%9D%B8%EC%8A%A4%ED%84%B4%EC%8A%A4-%ED%83%9C%EA%B7%B8-%EC%84%A4%EC%A0%95">EC2 ì¸ìŠ¤í„´ìŠ¤ íƒœê·¸ ì„¤ì •</a></p>
</li>
<li>
<p><a href="#ec2%EC%97%90-codedeploy-agent-%EC%84%A4%EC%B9%98">EC2ì— CodeDeploy agent ì„¤ì¹˜</a></p>
</li>
<li>
<p><a href="#%EC%97%AD%ED%95%A0-%EC%82%AC%EC%9A%A9%EC%9E%90-%EC%84%A4%EC%A0%95">ì—­í• , ì‚¬ìš©ì ì„¤ì •</a></p>
<ul>
<li><a href="#ec2">EC2</a></li>
<li><a href="#codedeploy">CodeDeploy</a></li>
<li><a href="#aws-cli">AWS CLI</a></li>
</ul>
</li>
<li>
<p><a href="#codedeploy-%EC%95%A0%ED%94%8C%EB%A6%AC%EC%BC%80%EC%9D%B4%EC%85%98-%EB%B0%8F-%EB%B0%B0%ED%8F%AC-%EA%B7%B8%EB%A3%B9-%EC%83%9D%EC%84%B1">CodeDeploy ì• í”Œë¦¬ì¼€ì´ì…˜ ë° ë°°í¬ ê·¸ë£¹ ìƒì„±</a></p>
<ul>
<li><a href="#%EC%95%A0%ED%94%8C%EB%A6%AC%EC%BC%80%EC%9D%B4%EC%85%98">ì• í”Œë¦¬ì¼€ì´ì…˜</a></li>
<li><a href="#%EB%B0%B0%ED%8F%AC-%EA%B7%B8%EB%A3%B9">ë°°í¬ ê·¸ë£¹</a></li>
</ul>
</li>
<li>
<p><a href="#ec2-%EC%97%AD%ED%95%A0-%EC%97%B0%EA%B2%B0">EC2 ì—­í•  ì—°ê²°</a></p>
</li>
<li>
<p><a href="#appspecyml">appspec.yml</a></p>
</li>
</ul>
</li>
<li>
<p><a href="#nginx">Nginx</a></p>
<ul>
<li><a href="#%EC%84%A4%EC%B9%98-2">ì„¤ì¹˜</a></li>
<li><a href="#%EC%84%A4%EB%AA%85-2">ì„¤ëª…</a></li>
</ul>
</li>
<li>
<p><a href="#%EB%A7%88%EB%AC%B4%EB%A6%AC">ë§ˆë¬´ë¦¬</a></p>
</li>
</ul></div></div><section class="blog-post__Section-sc-bktxku-4 ktKOFE"><h1 id="intro" style="position:relative;"><a href="#intro" aria-label="intro permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Intro</h1>
<p>ì´ë²ˆ ê¸€ì—ì„œëŠ” CI/CDë¥¼ í†µí•œ ë¬´ì¤‘ë‹¨ ë°°í¬ë¥¼ êµ¬í˜„í•˜ê¸° ìœ„í•´ êµ¬ë¥¸ ì¥ëŒ€í•œ ì‚½ì§ˆì˜ ì—°ëŒ€ê¸°ê°€ ì†Œê°œë  ì˜ˆì •ì…ë‹ˆë‹¤.</p>
<p>ë¬´ì¤‘ë‹¨ ë°°í¬ì™€ CI/CD, ë“£ê¸°ë§Œ í•´ë„ ë“ ë“ í•´ì§€ëŠ” ë‘ ë‹¨ì–´ê°€ í“¨-ì ¼ í•´ë²„ë¦°ë‹¤ë©´ ì–´ë–»ê²Œ ë ê¹Œìš”? ë³´ê¸°ë§Œ í•´ë„ íë­‡í•´ì ¸ë²„ë¦´ ê²ë‹ˆë‹¤.</p>
<p>ê·¸ë ‡ìŠµë‹ˆë‹¤. ì§€ê¸ˆ ì‹¤ì‹¤ ì›ƒìœ¼ë©´ì„œ í‚¤ë³´ë“œë¥¼ ì¹˜ê³  ìˆëŠ” ì´ìœ ë„ ê·¸ê²ë‹ˆë‹¤. ë°°í¬ ì„±ê³µ, ì–¼ë§ˆë‚˜ í–‰ë³µí•œ ë‹¨ì–´ì¸ê°€ìš”?</p>
<h1 id="ì´ë ‡ê²Œ-ëŒì•„ê°‘ë‹ˆë‹¤" style="position:relative;"><a href="#%EC%9D%B4%EB%A0%87%EA%B2%8C-%EB%8F%8C%EC%95%84%EA%B0%91%EB%8B%88%EB%8B%A4" aria-label="ì´ë ‡ê²Œ ëŒì•„ê°‘ë‹ˆë‹¤ permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ì´ë ‡ê²Œ ëŒì•„ê°‘ë‹ˆë‹¤</h1>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 521px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/b-log/static/5a2608fdb44692a5da148f5d290efadc/bb9c5/2022-06-05-01.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 65.54054054054055%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsTAAALEwEAmpwYAAADL0lEQVQ4y22Sz2/bZBjHH9ZKm3boadzggBAnkFA68QfsxqmHSvwLSIhdeiAaLT9OMAmGqiIxhlghtZqq7UpbhCiIIaqtidPaWWs7ies0sRMnNpnj/GjsBGdO3vdBdrNuhz3SV+/j53308fN9bIBRIOLzeqnX610I8snJSdje3r4QiUQuT09PTwQ1lmWvcxwnAcDY3NzcW8ViEVVV/VxRFIAXAfv9PpimGeaRSOS87jjO+QsR8Uo+nw+ft7a23llcXJzIZDLPgKVS6WnzJVEU7wmCsCfL8rWpqanXWZb9LZ1O/5lMJu8yDPOqKIq3JUn6fmlp6U2O4xZSqdR9nud/FwTh6ouAF3mev5VIJGKqql6dmZl5WZblm5qmfSVJ0o3l5eUre3t7Xx4cHHwdj8dfkyTpg1wud0uSpC9EUXwDAt9ra2sh1LKscUmSxnRdD+tPrR4eHkJgL5VKwWiHwPM8zM7Owv7+/tsbGxvv7e7uvivL8gQcHx/D6uoqzM/Pg2EY0Gw2od1uQ6fTAdu2w711HBeQPAlhrlGExPYK/LURB+vxY9B1ncnn81gqlVqmab4C6XQaNjc3YWFhYaxSqbzfaDQ+tm07+rzq9Xq022lHkfaj7Uohyv29E2V370d1vfJRrVa7XSgU7mmatmxZ1mfBNOPBV1tfX7/U6XQaw+EQfd/HwWCAQR6cSAiWrSb+IZt4958j/DT2K/7wyw52XRcdx0FBELBWq6HneRha7PV6oR3P807wLJ5QSn1CiD8kxEc69NePdP9OquT/9DDrrxxV/flU1dftU79p14e5XI7ouj70PG8A1Wr1Q8Mw7iiKcs00TdkwDHRdl3S7Xdpqteip49DeaYvGeY2mqy2qnijUshv0m0SJZip1ioihgiCEUCiXy0lVVVEUxU90Xc8UCgVsNpvEsizUNA3Nf2tYNyrIsAquPCrj1gMOdx4pePOBilnDDu0Eq6GUhoJsNhvYHQ9+G8/ziiPLJLgkoRBx0EeG15DVW5gWM6iaFn7HGZg1GmdAQp4BGYaBRqMBsVjsouu6akgLZh81EHLmis1X8NuHJ/jjvhbq56SCTvc/HPWfA/8HQGsGnbRUyWkAAAAASUVORK5CYII='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="2022 06 05 01"
        title="2022 06 05 01"
        src="/b-log/static/5a2608fdb44692a5da148f5d290efadc/bb9c5/2022-06-05-01.png"
        srcset="/b-log/static/5a2608fdb44692a5da148f5d290efadc/12f09/2022-06-05-01.png 148w,
/b-log/static/5a2608fdb44692a5da148f5d290efadc/e4a3f/2022-06-05-01.png 295w,
/b-log/static/5a2608fdb44692a5da148f5d290efadc/bb9c5/2022-06-05-01.png 521w"
        sizes="(max-width: 521px) 100vw, 521px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
  </a>
    </span></p>
<h1 id="ì¤€ë¹„ë¬¼" style="position:relative;"><a href="#%EC%A4%80%EB%B9%84%EB%AC%BC" aria-label="ì¤€ë¹„ë¬¼ permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ì¤€ë¹„ë¬¼</h1>
<ul>
<li><strong>Github Actions</strong>
<ul>
<li>Github ì €ì¥ì†Œì˜ íŠ¹ì • ë¸Œëœì¹˜ë¡œ í‘¸ì‹œê°€ ë°œìƒí–ˆì„ ë•Œ ì—¬ëŸ¬ ì‘ì—…ì„ ì‹¤í–‰ì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤</li>
</ul>
</li>
<li><strong>Docker</strong></li>
<li><strong>Nginx</strong>
<ul>
<li>ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œì™€ ë¡œë“œ ë°¸ëŸ°ì‹±ì„ ë‹´ë‹¹í•©ë‹ˆë‹¤</li>
</ul>
</li>
<li><strong>AWS</strong>
<ul>
<li>EC2</li>
<li>S3
<ul>
<li>Code Deployë¥¼ í†µí•´ ì½”ë“œë¥¼ ë°°í¬í•˜ê¸° ì „ ì ì‹œ ì €ì¥í•©ë‹ˆë‹¤</li>
</ul>
</li>
<li>Code Deploy
<ul>
<li>EC2ë¡œì˜ ë°°í¬ë¥¼ ë‹´ë‹¹í•©ë‹ˆë‹¤</li>
</ul>
</li>
</ul>
</li>
</ul>
<h1 id="docker" style="position:relative;"><a href="#docker" aria-label="docker permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Docker</h1>
<h2 id="ì„¤ì¹˜" style="position:relative;"><a href="#%EC%84%A4%EC%B9%98" aria-label="ì„¤ì¹˜ permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ì„¤ì¹˜</h2>
<div class="gatsby-highlight" data-language="shell"><pre style="counter-reset: linenumber NaN" class="language-shell line-numbers"><code class="language-shell"><span class="token function">sudo</span> amazon-linux-extras <span class="token function">install</span> <span class="token function">docker</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>
<h2 id="dockerfile" style="position:relative;"><a href="#dockerfile" aria-label="dockerfile permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Dockerfile</h2>
<p>Nextjsë¥¼ ë„ì»¤ ì´ë¯¸ì§€ë¡œ ë¹Œë“œí•˜ê¸° ìœ„í•´ì„  ê·¸ì— ë§ëŠ” Dockerfileì´ í•„ìš”í•©ë‹ˆë‹¤.</p>
<div class="gatsby-highlight" data-language="dockerfile"><pre style="counter-reset: linenumber NaN" class="language-dockerfile line-numbers"><code class="language-dockerfile"><span class="token comment"># node_modulesë¥¼ ìƒì„±</span>
<span class="token instruction"><span class="token keyword">FROM</span> node:16-alpine <span class="token keyword">AS</span> deps</span>
<span class="token instruction"><span class="token keyword">RUN</span> apk add --no-cache libc6-compat</span>

<span class="token instruction"><span class="token keyword">WORKDIR</span> /app</span>
<span class="token instruction"><span class="token keyword">COPY</span> package.json yarn.lock ./</span>
<span class="token instruction"><span class="token keyword">RUN</span> yarn install --frozen-lockfile</span>

<span class="token comment"># ìƒì„±ëœ node_modulesë¥¼ ë°›ì•„ ë¹Œë“œ</span>
<span class="token instruction"><span class="token keyword">FROM</span> node:16-alpine <span class="token keyword">AS</span> builder</span>
<span class="token instruction"><span class="token keyword">WORKDIR</span> /app</span>
<span class="token instruction"><span class="token keyword">COPY</span> <span class="token options"><span class="token property">--from</span><span class="token punctuation">=</span><span class="token string">deps</span></span> /app/node_modules ./node_modules</span>
<span class="token instruction"><span class="token keyword">COPY</span> . .</span>

<span class="token instruction"><span class="token keyword">RUN</span> yarn build</span>

<span class="token comment"># ë¹Œë“œëœ íŒŒì¼ë“¤ì„ ë°›ì•„ ì‹¤í–‰</span>
<span class="token instruction"><span class="token keyword">FROM</span> node:16-alpine <span class="token keyword">AS</span> runner</span>
<span class="token instruction"><span class="token keyword">WORKDIR</span> /app</span>

<span class="token instruction"><span class="token keyword">ENV</span> NODE_ENV production</span>

<span class="token instruction"><span class="token keyword">RUN</span> addgroup --system --gid 1001 nodejs</span>
<span class="token instruction"><span class="token keyword">RUN</span> adduser --system --uid 1001 nextjs</span>

<span class="token instruction"><span class="token keyword">COPY</span> <span class="token options"><span class="token property">--from</span><span class="token punctuation">=</span><span class="token string">builder</span></span> /app/public ./public</span>
<span class="token instruction"><span class="token keyword">COPY</span> <span class="token options"><span class="token property">--from</span><span class="token punctuation">=</span><span class="token string">builder</span></span> /app/package.json ./package.json</span>

<span class="token instruction"><span class="token keyword">COPY</span> <span class="token options"><span class="token property">--from</span><span class="token punctuation">=</span><span class="token string">builder</span> <span class="token property">--chown</span><span class="token punctuation">=</span><span class="token string">nextjs:nodejs</span></span> /app/.next/standalone ./</span>
<span class="token instruction"><span class="token keyword">COPY</span> <span class="token options"><span class="token property">--from</span><span class="token punctuation">=</span><span class="token string">builder</span> <span class="token property">--chown</span><span class="token punctuation">=</span><span class="token string">nextjs:nodejs</span></span> /app/.next/static ./.next/static</span>

<span class="token instruction"><span class="token keyword">USER</span> nextjs</span>

<span class="token instruction"><span class="token keyword">EXPOSE</span> 3000</span>

<span class="token instruction"><span class="token keyword">ENV</span> PORT 3000</span>

<span class="token instruction"><span class="token keyword">CMD</span> [<span class="token string">"node"</span>, <span class="token string">"server.js"</span>]</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>ë‹¨ê³„ë¥¼ ë‚˜ëˆ  nextjsë¥¼ ë¹Œë“œí•œ ë’¤ ì‹¤í–‰í•©ë‹ˆë‹¤. ì‚¬ìš©í•  íŒŒì¼ë“¤ë§Œ ë‚¨ê²¨ ì´ë¯¸ì§€ í¬ê¸°ê°€ ì¤„ì–´ë“œëŠ” íš¨ê³¼ê°€ ìˆìŠµë‹ˆë‹¤.</p>
<h3 id="enable-standalone-option" style="position:relative;"><a href="#enable-standalone-option" aria-label="enable standalone option permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>enable standalone option</h3>
<p>ì•½ê°„ì˜ ë¬¸ì œê°€ ìˆìŠµë‹ˆë‹¤. Dockerfileì—ì„œ /.next/standaloneì´ ë³´ì´ë‚˜ìš”? NextjsëŠ” ê¸°ë³¸ì ìœ¼ë¡œ /.next/standaloneì„ ìƒì„±í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ì´ ë””ë ‰í† ë¦¬ê°€ ì¡´ì¬í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´ node ë‹¨ë…ìœ¼ë¡œ ì‹¤í–‰í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ì„¤ì •ìœ¼ë¡œ standaloneì„ ìƒì„±í•˜ë¼ê³  Nextjsì—ê²Œ ì•Œë ¤ì¤˜ì•¼ í•©ë‹ˆë‹¤.</p>
<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">const</span> nextConfig <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>
  <span class="token literal-property property">experimental</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">outputStandalone</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token operator">...</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>ë‹¤ìŒ ì„¤ì •ì„ next.config.jsì— ì ìš©í•˜ë©´ ë¹Œë“œ ì‹œ standaloneì´ ìƒì„±ë©ë‹ˆë‹¤.</p>
<h2 id="docker-compose" style="position:relative;"><a href="#docker-compose" aria-label="docker compose permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>docker-compose</h2>
<h3 id="ì„¤ì¹˜-1" style="position:relative;"><a href="#%EC%84%A4%EC%B9%98-1" aria-label="ì„¤ì¹˜ 1 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ì„¤ì¹˜</h3>
<blockquote>
<p>ğŸ”­ <strong>Reference</strong> <a href="https://docs.docker.com/compose/install/compose-plugin/#installing-compose-on-linux-systems">https://docs.docker.com/compose/install/compose-plugin/#installing-compose-on-linux-systems</a></p>
</blockquote>
<div class="gatsby-highlight" data-language="text"><pre style="counter-reset: linenumber NaN" class="language-text line-numbers"><code class="language-text">curl -SL https://github.com/docker/compose/releases/download/v2.5.0/docker-compose-linux-x86_64 -o /usr/local/bin/docker-compose</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>
<h3 id="ì„¤ëª…" style="position:relative;"><a href="#%EC%84%A4%EB%AA%85" aria-label="ì„¤ëª… permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ì„¤ëª…</h3>
<p>ì´ ê¸€ì—ì„œëŠ” ë¸”ë£¨-ê·¸ë¦° ë°©ì‹ì„ í†µí•´ ë¬´ì¤‘ë‹¨ ë°°í¬ë¥¼ êµ¬í˜„í•˜ë ¤ê³  í•©ë‹ˆë‹¤. ì´ ë•Œ í•„ìš”í•œ ê²Œ docker-compose ì…ë‹ˆë‹¤.</p>
<div class="gatsby-highlight" data-language="yml"><pre style="counter-reset: linenumber NaN" class="language-yml line-numbers"><code class="language-yml"><span class="token comment"># docker-compose-blue.yml</span>
<span class="token key atrule">services</span><span class="token punctuation">:</span>
  <span class="token key atrule">blue</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> docker<span class="token punctuation">-</span>image
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> 3000<span class="token punctuation">:</span><span class="token number">3000</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<div class="gatsby-highlight" data-language="yml"><pre style="counter-reset: linenumber NaN" class="language-yml line-numbers"><code class="language-yml"><span class="token comment">#docker-compose-green.yml</span>
<span class="token key atrule">services</span><span class="token punctuation">:</span>
  <span class="token key atrule">green</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> docker<span class="token punctuation">-</span>image
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> 3001<span class="token punctuation">:</span><span class="token number">3000</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>ë¸”ë£¨, ê·¸ë¦°ì˜ ì—­í• ì„ í•˜ëŠ” ë‘ ê°œì˜ docker-compose.ymlì´ í•„ìš”í•©ë‹ˆë‹¤. ë‘ íŒŒì¼ì˜ ì°¨ì´ëŠ” í¬íŠ¸ì…ë‹ˆë‹¤. ê°ê° 3000, 3001ìœ¼ë¡œ ì„¤ì •í–ˆìŠµë‹ˆë‹¤.</p>
<h1 id="github-actions" style="position:relative;"><a href="#github-actions" aria-label="github actions permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Github Actions</h1>
<h2 id="environments" style="position:relative;"><a href="#environments" aria-label="environments permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Environments</h2>
<p>Github Actions ì›Œí¬í”Œë¡œìš°ì— ì“°ì´ëŠ” ì‹œí¬ë¦¿ì„ ì •ì˜í•´ì¤˜ì•¼ í•©ë‹ˆë‹¤.</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/b-log/static/fb0391621f52db355a10c8fef88346ac/081ff/2022-06-07-08-28-03.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 38.513513513513516%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAABFUlEQVQoz32RbUsDMRCE7///PEGkaD+oaNtr7y6XpE022eSRy1WsSF0YJi+TyQ7bTbNl1xtetj0PjweGOZNVkVyISblEuUG64US48iXmpo2S6UKILJVTJQQopTIMI4f+yGQM96tSa2WyhbfPmc12xPmwGIZ2cSsyxnA6nZqxtQ7nHLO1OO/X9TnhY2lakcL7Tnj9iEhSut1uzzQZVBcB1FrwURl9JkgmpdQgjde9ZCVpoVwbWamiqnTDOGGdb1Hr6sg5JGYn5Fz+SbyaSU6EHJvZ8mFn7UytetWsougv+NGQRajX83tIugxE0FJaym7fO4JAVn6Z/jRS/8XNjFp1T5tn+qNhfyz4c6IUbZd/HtxN/q1b+QvXnXLtyeIxhwAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="2022 06 07 08 28 03"
        title="2022 06 07 08 28 03"
        src="/b-log/static/fb0391621f52db355a10c8fef88346ac/fcda8/2022-06-07-08-28-03.png"
        srcset="/b-log/static/fb0391621f52db355a10c8fef88346ac/12f09/2022-06-07-08-28-03.png 148w,
/b-log/static/fb0391621f52db355a10c8fef88346ac/e4a3f/2022-06-07-08-28-03.png 295w,
/b-log/static/fb0391621f52db355a10c8fef88346ac/fcda8/2022-06-07-08-28-03.png 590w,
/b-log/static/fb0391621f52db355a10c8fef88346ac/efc66/2022-06-07-08-28-03.png 885w,
/b-log/static/fb0391621f52db355a10c8fef88346ac/c83ae/2022-06-07-08-28-03.png 1180w,
/b-log/static/fb0391621f52db355a10c8fef88346ac/081ff/2022-06-07-08-28-03.png 2182w"
        sizes="(max-width: 590px) 100vw, 590px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
  </a>
    </span></p>
<p>íŒŒë€ìƒ‰ìœ¼ë¡œ í‘œì‹œëœ ìˆœì„œëŒ€ë¡œ Environmentsì— ì ‘ê·¼í•´ ìƒˆë¡œìš´ environmentë¥¼ ë§Œë“¤ê³  ì‹œí¬ë¦¿ì„ ì •ì˜í•´ì£¼ì„¸ìš”.</p>
<h2 id="ì„¤ëª…-1" style="position:relative;"><a href="#%EC%84%A4%EB%AA%85-1" aria-label="ì„¤ëª… 1 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ì„¤ëª…</h2>
<p>.github/workflowsì— ymlì„ ìƒì„±í•˜ì—¬ Github Actionsì˜ workflowë¥¼ ë§Œë“¤ì–´ ì¤„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<div class="gatsby-highlight" data-language="yml"><pre style="counter-reset: linenumber NaN" class="language-yml line-numbers"><code class="language-yml"><span class="token comment"># Workflowì˜ ì´ë¦„</span>
<span class="token key atrule">name</span><span class="token punctuation">:</span> Tests

<span class="token comment"># main ë¸Œëœì¹˜ì— í‘¸ì‹œê°€ ì¼ì–´ë‚¬ì„ ë•Œ ì´ Workflowë¥¼ ì‹¤í–‰</span>
<span class="token key atrule">on</span><span class="token punctuation">:</span>
  <span class="token key atrule">push</span><span class="token punctuation">:</span>
    <span class="token key atrule">branches</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span>

<span class="token comment"># ì‹¤í–‰ë  ì‘ì—…ë“¤</span>
<span class="token key atrule">jobs</span><span class="token punctuation">:</span>
  <span class="token key atrule">build</span><span class="token punctuation">:</span>
    <span class="token key atrule">runs-on</span><span class="token punctuation">:</span> ubuntu<span class="token punctuation">-</span>latest

    <span class="token comment"># íŠ¹ì • Enviromentsì˜ ì‹œí¬ë¦¿ì„ ê°€ì ¸ì˜´</span>
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
      <span class="token key atrule">name</span><span class="token punctuation">:</span> deploy secrets

    <span class="token key atrule">strategy</span><span class="token punctuation">:</span>
      <span class="token comment"># ìƒì„±í•  ì‘ì—…ì˜ ë…¸ë“œ ë²„ì „ ëª…ì‹œ</span>
      <span class="token key atrule">matrix</span><span class="token punctuation">:</span>
        <span class="token key atrule">node-version</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>16.x<span class="token punctuation">]</span>

    <span class="token key atrule">steps</span><span class="token punctuation">:</span>
      <span class="token comment"># Repositoryì˜ íŒŒì¼ë“¤ì„ ê°€ì ¸ì˜´</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Checkout
        <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/checkout@v3

      <span class="token comment"># ì—¬ëŸ¬ ë…¸ë“œ í™˜ê²½ì„ ë™ì‹œì— ë§Œë“¤ì–´ ëƒ„</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Node.js $<span class="token punctuation">{</span><span class="token punctuation">{</span> matrix.node<span class="token punctuation">-</span>version <span class="token punctuation">}</span><span class="token punctuation">}</span>
        <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/setup<span class="token punctuation">-</span>node@v3
        <span class="token key atrule">with</span><span class="token punctuation">:</span>
          <span class="token key atrule">node-version</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> matrix.node<span class="token punctuation">-</span>version <span class="token punctuation">}</span><span class="token punctuation">}</span>

      <span class="token punctuation">-</span> <span class="token key atrule">run</span><span class="token punctuation">:</span> yarn install
      <span class="token comment"># í…ŒìŠ¤íŠ¸</span>
      <span class="token punctuation">-</span> <span class="token key atrule">run</span><span class="token punctuation">:</span> yarn ci

      <span class="token comment"># ìƒì„±í•œ ì‚¬ìš©ìë¥¼ ì´ìš©í•´ awsì— ì ‘ê·¼</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Configure AWS credentials
        <span class="token key atrule">uses</span><span class="token punctuation">:</span> aws<span class="token punctuation">-</span>actions/configure<span class="token punctuation">-</span>aws<span class="token punctuation">-</span>credentials@v1
        <span class="token key atrule">with</span><span class="token punctuation">:</span>
          <span class="token key atrule">aws-access-key-id</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> secrets.AWS_ACCESS_KEY_ID <span class="token punctuation">}</span><span class="token punctuation">}</span>
          <span class="token key atrule">aws-secret-access-key</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> secrets.AWS_SECRET_ACCESS_KEY <span class="token punctuation">}</span><span class="token punctuation">}</span>
          <span class="token key atrule">aws-region</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> secrets.AWS_REGION <span class="token punctuation">}</span><span class="token punctuation">}</span>

      <span class="token comment"># S3ì— ì—…ë¡œë“œí•˜ê¸° ìœ„í•´ íŒŒì¼ì„ zipìœ¼ë¡œ ì••ì¶•</span>
      <span class="token comment"># -x node_modules/\* : node_modules ì œì™¸</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Compress the files
        <span class="token key atrule">run</span><span class="token punctuation">:</span> zip <span class="token punctuation">-</span>qq <span class="token punctuation">-</span>r ./$GITHUB_SHA.zip . <span class="token punctuation">-</span>x node_modules/\*

      <span class="token comment"># S3ì— ìƒì„±ëœ zipì„ ì—…ë¡œë“œ</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Upload to S3
        <span class="token key atrule">run</span><span class="token punctuation">:</span> aws s3 cp <span class="token punctuation">-</span><span class="token punctuation">-</span>region $AWS_REGION ./$GITHUB_SHA.zip s3<span class="token punctuation">:</span>//only<span class="token punctuation">-</span>deploy<span class="token punctuation">-</span>test<span class="token punctuation">-</span>bucket/$GITHUB_REPOSITORY/$GITHUB_SHA.zip

      <span class="token comment"># ì—…ë¡œë“œ í•œ zipì„ í† ëŒ€ë¡œ CodeDeployì—ì„œ ìƒˆë¡œìš´ ë°°í¬ë¥¼ ë§Œë“¤ê²Œ í•¨</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Create new Deployment
        <span class="token key atrule">run</span><span class="token punctuation">:</span> aws deploy create<span class="token punctuation">-</span>deployment <span class="token punctuation">-</span><span class="token punctuation">-</span>application<span class="token punctuation">-</span>name $DEPLOYMENT_APP_NAME <span class="token punctuation">-</span><span class="token punctuation">-</span>deployment<span class="token punctuation">-</span>config<span class="token punctuation">-</span>name CodeDeployDefault.AllAtOnce <span class="token punctuation">-</span><span class="token punctuation">-</span>deployment<span class="token punctuation">-</span>group<span class="token punctuation">-</span>name $DEPLOY_GROUP_NAME <span class="token punctuation">-</span><span class="token punctuation">-</span>s3<span class="token punctuation">-</span>location bucket=$S3_BUCKET_NAME<span class="token punctuation">,</span>bundleType=zip<span class="token punctuation">,</span>key=$GITHUB_REPOSITORY/$GITHUB_SHA.zip</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/b-log/static/2a301034e56e99ea91c7efcc56cfbe76/31198/2022-06-05-21-06-10.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 33.108108108108105%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABYlAAAWJQFJUiTwAAABbklEQVQoz42QO2/TYBSGLVokqqqq2GBAjKgdOvbvsEDVIhhAFQMCsfT3NKpKu4AYuzU0CYHaSRznaseJ4zSf7diO/T1VnFRZisQrPdLROUfvuSiqVqFYKnOtatj9PjNJKTNmmoQR5bbPn46PZgYUGj7Fps/Im2T10u8yJ6dnfP/xE9OyUJrNFnrdoG40cIZD7nRnGEYxjX6AYQc0BwF6L6DW8xFBmNWF8LJltEqNoeuipBJS5kRxwiSMiacJSSozprMGFshlnKTzgVbPxrRs2l2Tm7FA8UZ9HLuL0+tgtQ2sToM08vg/ycU1y4xyfCn4VhDk8mNyecHp1Zizgvgn50XByS/BRTXIDDw/wBm6DByXVsdEefqhyuN3FV580tn+ovNoX+PBq2tWX6us3MPDPRXl5V92vtaZxJI4inDcEZ7vZ6bKk/dVnh1Wef6xxtZnnc23Gmv7KusH2r1svJkP3D0yCOP5X6dJSpKkpFJyC7RK5qrr1UrBAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="2022 06 05 21 06 10"
        title="2022 06 05 21 06 10"
        src="/b-log/static/2a301034e56e99ea91c7efcc56cfbe76/fcda8/2022-06-05-21-06-10.png"
        srcset="/b-log/static/2a301034e56e99ea91c7efcc56cfbe76/12f09/2022-06-05-21-06-10.png 148w,
/b-log/static/2a301034e56e99ea91c7efcc56cfbe76/e4a3f/2022-06-05-21-06-10.png 295w,
/b-log/static/2a301034e56e99ea91c7efcc56cfbe76/fcda8/2022-06-05-21-06-10.png 590w,
/b-log/static/2a301034e56e99ea91c7efcc56cfbe76/31198/2022-06-05-21-06-10.png 694w"
        sizes="(max-width: 590px) 100vw, 590px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
  </a>
    </span></p>
<p>í‘¸ì‹œí•œ Repositoryë¡œ ê°€ì„œ Actionsë¥¼ í™•ì¸í•´ ë³´ë©´ Testsë¼ëŠ” workflowê°€ ìƒì„±ëœ ê±¸ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<p>ì´ì œ Github ActionsëŠ” main ë¸Œëœì¹˜ì— í‘¸ì‹œê°€ ë“¤ì–´ì˜¤ë©´ workflowì— ì ì–´ì¤€ ì‘ì—…ë“¤ì„ ì°¨ë¡€ëŒ€ë¡œ ì‹¤í–‰í•˜ê³  ê²°ê³¼ì— ë”°ë¼ ì„±ê³µ, ì‹¤íŒ¨ë¥¼ ì•Œë ¤ì¤ë‹ˆë‹¤.</p>
<h1 id="shell-scripts" style="position:relative;"><a href="#shell-scripts" aria-label="shell scripts permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Shell Scripts</h1>
<p>CodeDeployë¥¼ í†µí•´ ì‹¤í–‰ë  ì‰˜ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ë§Œë“¤ì–´ ë³´ê² ìŠµë‹ˆë‹¤.</p>
<h2 id="build_dockersh" style="position:relative;"><a href="#build_dockersh" aria-label="build_dockersh permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>build_docker.sh</h2>
<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash"><span class="token shebang important">#!/usr/bin/env bash</span>

<span class="token comment"># ì‘ì—…í•  ë””ë ‰í† ë¦¬</span>
<span class="token assign-left variable">WORKDIR</span><span class="token operator">=</span>/home/ec2-user/temp

<span class="token builtin class-name">cd</span> <span class="token variable">$WORKDIR</span>
<span class="token function">docker</span> build -t docker-tag <span class="token builtin class-name">.</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>ì²«ë²ˆì§¸ë¡œ ì‹¤í–‰ë  ìŠ¤í¬ë¦½íŠ¸ì…ë‹ˆë‹¤. ê°€ì ¸ì˜¨ íŒŒì¼ë“¤ì„ ì´ìš©í•´ ìƒˆë¡œìš´ ë„ì»¤ ì´ë¯¸ì§€ë¥¼ ë¹Œë“œí•©ë‹ˆë‹¤.</p>
<h2 id="switch_dockersh" style="position:relative;"><a href="#switch_dockersh" aria-label="switch_dockersh permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>switch_docker.sh</h2>
<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash"><span class="token shebang important">#!/usr/bin/env bash</span>

<span class="token comment"># ì‹¤í–‰ ì¤‘ì¸ ë„ì»¤ ì»¨í…Œì´ë„ˆë¥¼ íŠ¹ì •í•  ìˆ˜ ìˆëŠ” ë¬¸ìì—´</span>
<span class="token assign-left variable">KEYWORD</span><span class="token operator">=</span>running
<span class="token comment"># ì‘ì—…í•  ë””ë ‰í† ë¦¬</span>
<span class="token assign-left variable">WORKDIR</span><span class="token operator">=</span>/home/ec2-user/temp
<span class="token builtin class-name">cd</span> <span class="token variable">$WORKDIR</span>

<span class="token comment"># docker-compose-blue.ymlì„ í†µí•´ ì‹¤í–‰ëœ ì»¨í…Œì´ë„ˆë“¤ì˜ ëª©ë¡</span>
<span class="token assign-left variable">IS_BLUE_RUNNING</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">docker-compose</span> -p blue -f docker-compose-blue.yml <span class="token function">ps</span> <span class="token operator">|</span> <span class="token function">grep</span> $KEYWORD<span class="token variable">)</span></span>
<span class="token assign-left variable">IS_GREEN_RUNNING</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">docker-compose</span> -p green -f docker-compose-green.yml <span class="token function">ps</span> <span class="token operator">|</span> <span class="token function">grep</span> $KEYWORD<span class="token variable">)</span></span>

<span class="token keyword">if</span> <span class="token punctuation">[</span> -z <span class="token string">"<span class="token variable">$IS_BLUE_RUNNING</span>"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
  <span class="token function">docker-compose</span> -p blue -f docker-compose-blue.yml up -d 
  <span class="token keyword">if</span> <span class="token punctuation">[</span> -n <span class="token string">"<span class="token variable">$IS_GREEN_RUNNING</span>"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
    <span class="token comment"># ìŠ¬ë¦½ì„ í†µí•´ ë¸”ë£¨ê°€ ì™„ë²½íˆ ì‹¤í–‰ë  ë•Œê¹Œì§€ì˜ ìœ ì˜ˆë¥¼ ì¤Œ</span>
    <span class="token function">sleep</span> <span class="token number">10</span>
    <span class="token function">docker-compose</span> -p green -f docker-compose-green.yml down
  <span class="token keyword">fi</span>
<span class="token keyword">else</span>
  <span class="token function">docker-compose</span> -p green -f docker-compose-green.yml up -d 

  <span class="token comment"># ìŠ¬ë¦½ì„ í†µí•´ ê·¸ë¦°ì´ ì™„ë²½íˆ ì‹¤í–‰ë  ë•Œê¹Œì§€ì˜ ìœ ì˜ˆë¥¼ ì¤Œ</span>
  <span class="token function">sleep</span> <span class="token number">10</span>
  <span class="token function">docker-compose</span> -p blue -f docker-compose-blue.yml down
<span class="token keyword">fi</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>ë‘ë²ˆì§¸ë¡œ ì‹¤í–‰ë  ìŠ¤í¬ë¦½íŠ¸ì…ë‹ˆë‹¤. ë¹Œë“œëœ ë„ì»¤ ì´ë¯¸ì§€ë¥¼ docker-composeë¥¼ í†µí•´ ì‹¤í–‰í•©ë‹ˆë‹¤.</p>
<p>í˜„ì¬ ê·¸ë¦°ì´ ì‹¤í–‰ë˜ê³  ìˆë‹¤ê³  ê°€ì •í•©ì‹œë‹¤. ìŠ¤í¬ë¦½íŠ¸ëŠ” ë¸”ë£¨ë¥¼ ìƒˆë¡œ ì‹¤í–‰í•˜ê³  ì¼ì • ì‹œê°„ í›„ ê·¸ë¦°ì„ ì¢…ë£Œí•©ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ì„œë¹„ìŠ¤ë¥¼ ëŠê¹€ì—†ì´ ìœ ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<h1 id="aws" style="position:relative;"><a href="#aws" aria-label="aws permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>AWS</h1>
<h2 id="ec2-ì¸ìŠ¤í„´ìŠ¤-íƒœê·¸-ì„¤ì •" style="position:relative;"><a href="#ec2-%EC%9D%B8%EC%8A%A4%ED%84%B4%EC%8A%A4-%ED%83%9C%EA%B7%B8-%EC%84%A4%EC%A0%95" aria-label="ec2 ì¸ìŠ¤í„´ìŠ¤ íƒœê·¸ ì„¤ì • permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>EC2 ì¸ìŠ¤í„´ìŠ¤ íƒœê·¸ ì„¤ì •</h2>
<p>CodeDeployì—ì„œ ì¸ìŠ¤í„´ìŠ¤ë¥¼ êµ¬ë³„í•˜ê¸° ìœ„í•´ íƒœê·¸ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. íƒœê·¸ ê´€ë¦¬ë¡œ ë“¤ì–´ê°€ ìƒˆë¡œìš´ íƒœê·¸ë¥¼ ìƒì„±í•´ì£¼ì„¸ìš”. í‚¤ì™€ ê°’ì€ ë§ˆìŒëŒ€ë¡œ ìƒì„±í•´ë„ ë©ë‹ˆë‹¤.</p>
<h2 id="ec2ì—-codedeploy-agent-ì„¤ì¹˜" style="position:relative;"><a href="#ec2%EC%97%90-codedeploy-agent-%EC%84%A4%EC%B9%98" aria-label="ec2ì— codedeploy agent ì„¤ì¹˜ permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>EC2ì— CodeDeploy agent ì„¤ì¹˜</h2>
<blockquote>
<p>ğŸ”­ <strong>Reference</strong> <a href="https://docs.aws.amazon.com/ko_kr/codedeploy/latest/userguide/codedeploy-agent-operations-install-linux.html">https://docs.aws.amazon.com/ko_kr/codedeploy/latest/userguide/codedeploy-agent-operations-install-linux.html</a></p>
</blockquote>
<p>CodeDeployê°€ EC2 Instanceì— íŒŒì¼ë“¤ì„ ë°°í¬í•˜ê³  ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‹¤í–‰í•˜ê¸° ìœ„í•´ì„œëŠ” CodeDeploy agentê°€ ìˆì–´ì•¼ í•©ë‹ˆë‹¤.</p>
<p>ì—ì´ì „íŠ¸ë¥¼ ì„¤ì¹˜í•˜ëŠ” ë°©ë²•ì€ ë‘ê°€ì§€ê°€ ìˆìŠµë‹ˆë‹¤. í•˜ë‚˜ëŠ” AWS Systems Managerë¥¼, ë‹¤ë¥¸ í•˜ë‚˜ëŠ” ëª…ë ¹ì¤„ì„ ì´ìš©í•©ë‹ˆë‹¤. ì´ë²ˆì—ëŠ” ëª…ë ¹ì¤„ë¡œ ì„¤ì¹˜í•´ë³´ê² ìŠµë‹ˆë‹¤.</p>
<div class="gatsby-highlight" data-language="shell"><pre style="counter-reset: linenumber NaN" class="language-shell line-numbers"><code class="language-shell"><span class="token function">sudo</span> yum update

<span class="token function">sudo</span> yum <span class="token function">install</span> ruby

<span class="token function">sudo</span> yum <span class="token function">install</span> <span class="token function">wget</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>ë¨¼ì € í•„ìš”í•œ íŒ¨ì§€í‚¤ë“¤ì„ ë°›ì•„ì•¼ í•©ë‹ˆë‹¤. yumì„ ì—…ë°ì´íŠ¸ í›„ íŒ¨í‚¤ì§€ë“¤ì„ ì„¤ì¹˜í•´ì£¼ì„¸ìš”.</p>
<div class="gatsby-highlight" data-language="shell"><pre style="counter-reset: linenumber NaN" class="language-shell line-numbers"><code class="language-shell">https://docs.aws.amazon.com/ko_kr/codedeploy/latest/userguide/resource-kit.html<span class="token comment">#resource-kit-bucket-names</span>

<span class="token function">wget</span> https://bucket-name.s3.region-identifier.amazonaws.com/latest/install

<span class="token function">wget</span> https://aws-codedeploy-ap-northeast-2.s3.ap-northeast-2.amazonaws.com/latest/install</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>ê·¸ ë‹¤ìŒ CodeDeploy agentì˜ ì„¤ì¹˜ íŒŒì¼ì„ ë‹¤ìš´ë°›ìŠµë‹ˆë‹¤. ì´ íŒŒì¼ì€ ì•„ë§ˆì¡´ì˜ ë¦¬ì†ŒìŠ¤ í‚¤íŠ¸ S3 ë²„í‚·ì— ìœ„ì¹˜í•˜ê³  ìˆìŠµë‹ˆë‹¤. ë¦¬ì „ë³„ë¡œ ì£¼ì†Œê°€ ë‹¬ë¼ì§€ë‹ˆ ìƒë‹¨ì˜ ì˜ˆì‹œ ì£¼ì†Œë¥¼ ì°¸ê³ í•´ EC2 ì¸ìŠ¤í„´ìŠ¤ê°€ í•´ë‹¹í•˜ëŠ” ë¦¬ì „ì„ ì°¾ì•„ bucket-nameê³¼ region-identifierë¥¼ ì•Œë§ê²Œ ë³€ê²½í•´ì£¼ì„¸ìš”.</p>
<p>ì €ëŠ” í† ì¢… í•œêµ­ì¸ì´ê¸° ë•Œë¬¸ì— ì„œìš¸ ë¦¬ì „ìœ¼ë¡œ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í–ˆìŠµë‹ˆë‹¤. bucket-nameì€ aws-codedeploy-ap-northeast-2, region-identifierëŠ” ap-northeast-2ê°€ ë˜ê² ë„¤ìš”.</p>
<div class="gatsby-highlight" data-language="text"><pre style="counter-reset: linenumber NaN" class="language-text line-numbers"><code class="language-text">chmod +x ./install

sudo ./install auto</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>
<p>ë‹¤ìš´ë°›ì€ ì„¤ì¹˜ íŒŒì¼ì„ ì‹¤í–‰í•  ìˆ˜ ìˆë„ë¡ ê¶Œí•œì„ ì£¼ê³  CodeDeploy agentë¥¼ ì„¤ì¹˜í•©ë‹ˆë‹¤.</p>
<div class="gatsby-highlight" data-language="text"><pre style="counter-reset: linenumber NaN" class="language-text line-numbers"><code class="language-text">sudo service codedeploy-agent status</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>
<p>ì´ì œ CodeDeploy agentê°€ ì œëŒ€ë¡œ ì‹¤í–‰ë˜ê³  ìˆëŠ”ì§€ í™•ì¸í•´ë³´ì„¸ìš”. ì‹¤í–‰ë˜ê³  ìˆì§€ ì•Šë‹¤ë©´ ì§ì ‘ ì‹¤í–‰ì‹œì¼œì¤˜ì•¼ í•©ë‹ˆë‹¤.</p>
<div class="gatsby-highlight" data-language="text"><pre style="counter-reset: linenumber NaN" class="language-text line-numbers"><code class="language-text">sudo service codedeploy-agent start</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>
<p>ì‹¤í–‰ í›„ statusë¥¼ ì‚¬ìš©í•´ ë‹¤ì‹œ í•œ ë²ˆ í™•ì¸í•´ ë³´ì„¸ìš”.</p>
<h2 id="ì—­í• -ì‚¬ìš©ì-ì„¤ì •" style="position:relative;"><a href="#%EC%97%AD%ED%95%A0-%EC%82%AC%EC%9A%A9%EC%9E%90-%EC%84%A4%EC%A0%95" aria-label="ì—­í•  ì‚¬ìš©ì ì„¤ì • permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ì—­í• , ì‚¬ìš©ì ì„¤ì •</h2>
<p>AWSëŠ” IAMì„ í†µí•´ ì•¡ì„¸ìŠ¤ë¥¼ ê´€ë¦¬í•©ë‹ˆë‹¤. ê·¸ ì¤‘ì—ì„œ ì—­í• ê³¼ ì‚¬ìš©ìë¥¼ ì„¤ì •í•´ ì¤„ ê²ë‹ˆë‹¤. ì—­í• ì€ CodeDeployì™€ EC2, ì‚¬ìš©ìëŠ” AWS CLIì— ì‚¬ìš©ë©ë‹ˆë‹¤.</p>
<h3 id="ec2" style="position:relative;"><a href="#ec2" aria-label="ec2 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>EC2</h3>
<p>EC2ëŠ” CodeDeployë¥¼ í†µí•´ S3ì—ì„œ zip íŒŒì¼ì„ ê°€ì ¸ì™€ì•¼ í•©ë‹ˆë‹¤. CodeDeployì™€ S3ì˜ ê¶Œí•œì´ í•„ìš”í•˜ê² ë„¤ìš”.</p>
<ol>
<li>IAMì˜ ì—­í• ë¡œ ë“¤ì–´ê°€ ì—­í•  ë§Œë“¤ê¸°ë¡œ ìƒˆë¡œìš´ ì—­í• ì„ ë§Œë“¤ì–´ ì¤ë‹ˆë‹¤.</li>
</ol>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/b-log/static/804f75574039778159581af6c5461638/80260/2022-06-05-23-45-35.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 30.405405405405407%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAmklEQVQY05VRAQrCMAzc///nE8RhRdaONm2a9CRVEbY6MXA0hNxxl05X53CZZyzeQ0TRGtBa20FVO979aMcw3dYM5xMWEtwjw2cFUQZRAjOjlIJaK3LOHdbb3F4T2NYUY0QiQulkW5ROIKJOMogIRjV06H1AZQa/nPwiHEHVBEPAGkKPZk7+FdlFtnh2m6NDf/ukZ/9JcjpHPACZedmBubvM8gAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="2022 06 05 23 45 35"
        title="2022 06 05 23 45 35"
        src="/b-log/static/804f75574039778159581af6c5461638/fcda8/2022-06-05-23-45-35.png"
        srcset="/b-log/static/804f75574039778159581af6c5461638/12f09/2022-06-05-23-45-35.png 148w,
/b-log/static/804f75574039778159581af6c5461638/e4a3f/2022-06-05-23-45-35.png 295w,
/b-log/static/804f75574039778159581af6c5461638/fcda8/2022-06-05-23-45-35.png 590w,
/b-log/static/804f75574039778159581af6c5461638/efc66/2022-06-05-23-45-35.png 885w,
/b-log/static/804f75574039778159581af6c5461638/c83ae/2022-06-05-23-45-35.png 1180w,
/b-log/static/804f75574039778159581af6c5461638/80260/2022-06-05-23-45-35.png 4312w"
        sizes="(max-width: 590px) 100vw, 590px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
  </a>
    </span></p>
<ol start="2">
<li>
<p>ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ì—”í‹°í‹° ìœ í˜•ì€ AWS ì„œë¹„ìŠ¤, ì‚¬ìš© ì‚¬ë¡€ëŠ” EC2ë¥¼ ì„ íƒí•˜ê³  ë‹¤ìŒì„ ëˆ„ë¦…ë‹ˆë‹¤.</p>
</li>
<li>
<p>ë‹¤ìŒì€ ê¶Œí•œ ì¶”ê°€ì…ë‹ˆë‹¤. AmazonS3FullAccess, AWSCodeDeployFullAccessë¥¼ ê²€ìƒ‰í•´ ì„ íƒí•˜ê³  ë‹¤ìŒì„ ëˆ„ë¦…ë‹ˆë‹¤.</p>
</li>
<li>
<p>ë§ˆì§€ë§‰ í™”ë©´ì…ë‹ˆë‹¤. í•œ ëˆˆì— ì•Œì•„ë³¼ë§Œí•œ ì—­í•  ì´ë¦„ì„ ì ê³  ì—­í• ì„ ìƒì„±í•´ì£¼ì„¸ìš”. ì„¤ëª…ì„ ì ì–´ë„ ìƒê´€ ì—†ìŠµë‹ˆë‹¤.</p>
</li>
</ol>
<h3 id="codedeploy" style="position:relative;"><a href="#codedeploy" aria-label="codedeploy permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>CodeDeploy</h3>
<ol>
<li>IAMì˜ ì—­í• ë¡œ ë“¤ì–´ê°€ ì—­í•  ë§Œë“¤ê¸°ë¡œ ìƒˆë¡œìš´ ì—­í• ì„ ë§Œë“¤ì–´ ì¤ë‹ˆë‹¤.</li>
</ol>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/b-log/static/315945cec09786624a482265500aae98/80260/2022-06-05-23-57-18.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 35.810810810810814%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABYlAAAWJQFJUiTwAAAAqklEQVQoz42Q4QrDIAyEff+n3L9ttM7RxRqj9kbsLKNTWOAjEcnlEnObLK73CQutYMmQAuScUYpSDlJKFa33/4Jt234wzkc8iLFwhvNS8xoCvPcQEcQYq5BmRcX0rbkXhugF5oAkUlFnTUCbmptedB0S0We6IA2m9hpHGOeeUFFdr63xT2O74Xmwma2FtRbMjBDCcbPR0c80IWCvjbpq7r7pORido+XLzHgD31koppog9pkAAAAASUVORK5CYII='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="2022 06 05 23 57 18"
        title="2022 06 05 23 57 18"
        src="/b-log/static/315945cec09786624a482265500aae98/fcda8/2022-06-05-23-57-18.png"
        srcset="/b-log/static/315945cec09786624a482265500aae98/12f09/2022-06-05-23-57-18.png 148w,
/b-log/static/315945cec09786624a482265500aae98/e4a3f/2022-06-05-23-57-18.png 295w,
/b-log/static/315945cec09786624a482265500aae98/fcda8/2022-06-05-23-57-18.png 590w,
/b-log/static/315945cec09786624a482265500aae98/efc66/2022-06-05-23-57-18.png 885w,
/b-log/static/315945cec09786624a482265500aae98/c83ae/2022-06-05-23-57-18.png 1180w,
/b-log/static/315945cec09786624a482265500aae98/80260/2022-06-05-23-57-18.png 4312w"
        sizes="(max-width: 590px) 100vw, 590px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
  </a>
    </span></p>
<ol start="2">
<li>
<p>ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ì—”í‹°í‹° ìœ í˜•ì€ AWS ì„œë¹„ìŠ¤, ì‚¬ìš© ì‚¬ë¡€ëŠ” ê²€ìƒ‰ì„ í†µí•´ CodeDeployë¥¼ ì„ íƒí•˜ê³  ë‹¤ìŒì„ ëˆ„ë¦…ë‹ˆë‹¤.</p>
</li>
<li>
<p>ë‹¤ìŒì€ ê¶Œí•œ ì¶”ê°€ì…ë‹ˆë‹¤. AWSCodeDeployRoleê°€ ì´ë¯¸ ì„ íƒë˜ì–´ ìˆì„ê²ë‹ˆë‹¤. ë‹¤ìŒì„ ëˆ„ë¦…ë‹ˆë‹¤.</p>
</li>
<li>
<p>ë§ˆì§€ë§‰ í™”ë©´ì…ë‹ˆë‹¤. í•œ ëˆˆì— ì•Œì•„ë³¼ë§Œí•œ ì—­í•  ì´ë¦„ì„ ì ê³  ì—­í• ì„ ìƒì„±í•´ì£¼ì„¸ìš”. ì„¤ëª…ì„ ì ì–´ë„ ìƒê´€ ì—†ìŠµë‹ˆë‹¤.</p>
</li>
</ol>
<h3 id="aws-cli" style="position:relative;"><a href="#aws-cli" aria-label="aws cli permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>AWS CLI</h3>
<p>AWS CLIëŠ” ì•¡ì„¸ìŠ¤ í‚¤ë¥¼ í†µí•´ ì¸ì¦ì„ ì§„í–‰í•©ë‹ˆë‹¤. ì•¡ì„¸ìŠ¤ í‚¤ë¥¼ ì–»ê¸° ìœ„í•´ì„œëŠ” ì—­í• ì´ ì•„ë‹Œ ì‚¬ìš©ìë¥¼ ìƒì„±í•´ì•¼ í•©ë‹ˆë‹¤.</p>
<p>AWS CLIë¥¼ í†µí•´ Github Actionsì—ì„œ S3ì— zipì„ ì—…ë¡œë“œí•˜ê³  CodeDeployì— ìƒˆë¡œìš´ ë°°í¬ë¥¼ ìƒì„±í•˜ê²Œ í•  ê²ë‹ˆë‹¤. S3ì™€ CodeDeployì˜ ê¶Œí•œì´ í•„ìš”í•©ë‹ˆë‹¤.</p>
<ol>
<li>
<p>IAMì˜ ì‚¬ìš©ìë¡œ ë“¤ì–´ê°€ ìƒˆë¡œìš´ ì‚¬ìš©ìë¥¼ ë§Œë“¤ì–´ ì¤ë‹ˆë‹¤.</p>
</li>
<li>
<p>í•œ ëˆˆì— ì•Œì•„ë³¼ë§Œí•œ ì‚¬ìš©ì ì´ë¦„ì„ ì ê³  ìê²© ì¦ëª… ìœ í˜•ì— ì•¡ì„¸ìŠ¤ í‚¤ - í”„ë¡œê·¸ë˜ë° ë°©ì‹ ì•¡ì„¸ìŠ¤ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.</p>
</li>
<li>
<p>ê¶Œí•œ ì„¤ì •ì— ê¸°ì¡´ ì •ì±… ì§ì ‘ ì—°ê²°ë¡œ ê°€ì„œ AmazonS3FullAccess, AWSCodeDeployFullAccessë¥¼ ì°¾ì•„ ì„ íƒí•´ì£¼ì„¸ìš”.</p>
</li>
<li>
<p>íƒœê·¸ëŠ” ì§€ë‚˜ì³ë„ ë©ë‹ˆë‹¤.</p>
</li>
<li>
<p>ê²€í†  í›„ ì‚¬ìš©ìë¥¼ ìƒì„±í•˜ì„¸ìš”.</p>
</li>
</ol>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 270px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/b-log/static/b11c98564d28522b90a9df4360c7adad/01bf6/2022-06-06-00-10-30.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 222.2972972972973%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAsCAYAAABloJjNAAAACXBIWXMAABYlAAAWJQFJUiTwAAAEa0lEQVRIx61X21IbRxDdT8kHJf+SlzyQB/KWVHjKQ6pSgSgOkFA2Fpg4LiHK4DJBxhGqAguE0F1CEhJC9/tedVKnxWKxSEGYjKprZnpmTp+e7l31KgAwGAxg9+NkdM25z272XJm0eZwB5+Fx64pz47ixE2hSu2HY7/fR7XZRLBZlnMlkEI1Gkc/nUa1WkUqlkE6n0Wq15CD3BgIBZLNZaJqG8/Nz5HI5XFxcDAFLpRJCoZAAcTEYDGJ/fx/hcBjtdlvGPByLxQSQ4Ds7OwJqGIYQOT4+xtHR0dBlsjk7OxMFrRwcHGB7e1vmNHJ6eioHyIItEomIUeoKhYKcJ3vqFMuyhLZtudfryQYukpG9Rvfr9frNfSWTSWGv67rsIVNejTIpINzoXLsvIBKUSeEflyL3pYykzX2JPSllJib2JIufKsp/3cunNHHZsEyopgbV1B8tSkfvIVA+RbieRKiewOkjRan0G0i2srxWaAMV+kATUa0+tOvxONGuxalXqmoTieY5jIGOrtkV6Vt9uQ/VUmXeM3u3hHobzLk2BGxlYcKQw5qloqG34Mn6UFFrN4dohH3H7Io+371EtlO8tcb+FmDb6Aizrw9+xGcrn+PbIxcsGAJCD9LtPH4+c8Od2sbr/HsZjxq9w3AIOMD3H57gC++X+OqfHwBY6BidG8Dvjn7FYvQvMfZN4CcBpFddozvB5YGGht6EJ+dDVavfsq5DR6iVQFErI9MvINXLyzl1oMKAAQ3abcDRS2ejZVvHzZe1S2QyKaQySYTCJziLhHESOUGlVZG+UC44GY5c/rULnNMdEyYiiQj+9LzEU/dTLDz5BYt/LOH5i+eIJCNw/ebCO/+78YDjRJgPVLS1toyr7So6WgeVZkV0V/UrdPTOdIA2WK1dQ7aYRTKbRDwTlz5fyiOdTwtgqV6aDpAu89Jj6Ri8214s/r4oLq6/XMfK6oqI/9CPw5PD6RnawOVmWYJzUb5ANBVFMBwU1sVqEY1e42F3yF67/jGFyJrB4pi6O0/KfQydzy3FTmgZ6937AUfBGBhbOLcjzjlZygt2KoZGT9xL5VJYXV+V3HO/cOOV95Uk9DP3M2y+3sSbv99Mx9B+7Jgee+/3JIEDHwISWQbkre+tgLk33A9zmRdvwZJAGNfPsK3jnP2Dg8Ig2DIuMHcAe48UAUyOvG0m5eG0In9SkUZa3nt8wfLt/BhR+qaGYDU2/BusPV4U/M9NShHTND+K9XHMmk/ENMbq2DvPKKwDWX2yaGSxSVFVVcQ+wD12YTkKzN4+x77RaAwBK5WK0N3a2sLm5qaMWa2y3o7H41KDs6rd29uDz+eDx+OR3uv1wu/3S+VKAldXV1CIXC6XpX6emZnB7OysFOGssRcWFjA3N4elpSUp0Dc2NjA/Pw+Xy4Xl5WUZr62tYXd3F81mU8pmAWRhzvqaRTi/BmiRzFhjs5bmnAap45cBi3jup57riUTiZl2Cwm8RulWr1WRM6mTNq2BP4bqto9h7nOv/AhFWCpTlNsGIAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="2022 06 06 00 10 30"
        title="2022 06 06 00 10 30"
        src="/b-log/static/b11c98564d28522b90a9df4360c7adad/01bf6/2022-06-06-00-10-30.png"
        srcset="/b-log/static/b11c98564d28522b90a9df4360c7adad/12f09/2022-06-06-00-10-30.png 148w,
/b-log/static/b11c98564d28522b90a9df4360c7adad/01bf6/2022-06-06-00-10-30.png 270w"
        sizes="(max-width: 270px) 100vw, 270px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
  </a>
    </span></p>
<ol start="6">
<li>ì‚¬ìš©ì ì¶”ê°€ê°€ ì„±ê³µí–ˆë‹¤ë©´ ë°˜ë“œì‹œ csv íŒŒì¼ì„ ì €ì¥í•´ ë†“ìœ¼ì„¸ìš”. ì‹œí¬ë¦¿ í‚¤ëŠ” ì´ í™”ë©´ ì´í›„ ì ˆëŒ€ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</li>
</ol>
<h2 id="codedeploy-ì• í”Œë¦¬ì¼€ì´ì…˜-ë°-ë°°í¬-ê·¸ë£¹-ìƒì„±" style="position:relative;"><a href="#codedeploy-%EC%95%A0%ED%94%8C%EB%A6%AC%EC%BC%80%EC%9D%B4%EC%85%98-%EB%B0%8F-%EB%B0%B0%ED%8F%AC-%EA%B7%B8%EB%A3%B9-%EC%83%9D%EC%84%B1" aria-label="codedeploy ì• í”Œë¦¬ì¼€ì´ì…˜ ë° ë°°í¬ ê·¸ë£¹ ìƒì„± permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>CodeDeploy ì• í”Œë¦¬ì¼€ì´ì…˜ ë° ë°°í¬ ê·¸ë£¹ ìƒì„±</h2>
<p>ì´ ê³¼ì •ì„ í†µí•´ ì–´ë–¤ ì¸ìŠ¤í„´ìŠ¤ì— ë°°í¬ë¥¼ ìˆ˜í–‰í• ì§€, ì–´ë–»ê²Œ ìˆ˜í–‰í• ì§€ ì •í•´ì¤„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<h3 id="ì• í”Œë¦¬ì¼€ì´ì…˜" style="position:relative;"><a href="#%EC%95%A0%ED%94%8C%EB%A6%AC%EC%BC%80%EC%9D%B4%EC%85%98" aria-label="ì• í”Œë¦¬ì¼€ì´ì…˜ permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ì• í”Œë¦¬ì¼€ì´ì…˜</h3>
<ol>
<li>
<p>CodeDeploy > ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ìƒì„±í•˜ì„¸ìš”</p>
</li>
<li>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/b-log/static/c1a502b25b7b8f1b7e8759b936a7979e/0ef7e/2022-06-06-00-21-06.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 42.567567567567565%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA50lEQVQoz52R3UoDMRCF85TeCb3vE3khvfJxrHcWoaW22yrYJSSbTJbdJHNkIqwr1nZx4CPkZ87MyajH5ROeVytU1QExRnRd9y/6vkdoWygRyTkPpJSQZL2GvBshuSKs9tUBx+MbPFE5lGDmy+B8SHPKOY/GOThP6GP8VfkcxRXzj+KDIIUwVBhbv4RY5r8E15stnPfTrI6Sv/e5AOYyGLV93eFU1+VyaodEYRAeR8oMZayFbZoylKnIn1NoEUIAmRpkTgVvaijrXBEUYWObK3wVt9aiev+A3r9A399CL2bQdzfQD3N8Atp1vDmBmowRAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="2022 06 06 00 21 06"
        title="2022 06 06 00 21 06"
        src="/b-log/static/c1a502b25b7b8f1b7e8759b936a7979e/fcda8/2022-06-06-00-21-06.png"
        srcset="/b-log/static/c1a502b25b7b8f1b7e8759b936a7979e/12f09/2022-06-06-00-21-06.png 148w,
/b-log/static/c1a502b25b7b8f1b7e8759b936a7979e/e4a3f/2022-06-06-00-21-06.png 295w,
/b-log/static/c1a502b25b7b8f1b7e8759b936a7979e/fcda8/2022-06-06-00-21-06.png 590w,
/b-log/static/c1a502b25b7b8f1b7e8759b936a7979e/efc66/2022-06-06-00-21-06.png 885w,
/b-log/static/c1a502b25b7b8f1b7e8759b936a7979e/c83ae/2022-06-06-00-21-06.png 1180w,
/b-log/static/c1a502b25b7b8f1b7e8759b936a7979e/0ef7e/2022-06-06-00-21-06.png 1594w"
        sizes="(max-width: 590px) 100vw, 590px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
  </a>
    </span>
í•œ ëˆˆì— ì•Œì•„ë³¼ë§Œí•œ ì´ë¦„ì„ ì ê³  ì»´í“¨íŒ… í”Œë«í¼ìœ¼ë¡œ EC2/ì˜¨í”„ë ˆë¯¸ìŠ¤ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”</p>
</li>
</ol>
<h3 id="ë°°í¬-ê·¸ë£¹" style="position:relative;"><a href="#%EB%B0%B0%ED%8F%AC-%EA%B7%B8%EB%A3%B9" aria-label="ë°°í¬ ê·¸ë£¹ permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ë°°í¬ ê·¸ë£¹</h3>
<ol>
<li>
<p>ìƒì„±í•œ ì• í”Œë¦¬ì¼€ì´ì…˜ì— ë“¤ì–´ê°€ ë°°í¬ ê·¸ë£¹ì„ ìƒì„±í•˜ì„¸ìš”</p>
</li>
<li>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/b-log/static/0af9c1217a90dde978e0f4fdae006d85/1e5d2/2022-06-06-00-25-07.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 45.27027027027027%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA9klEQVQoz5WR6W7DIBCEef8n7I+mluKYOj4Ac9lcngjsREkPyVnp0yywGolZcu06NJTiq6ogpYJzDvOyYHmD+7wxFoRxjrZtUdcXWGuRUkKM8S3CrtmUGGPQ9wM4F3DOHzdMCfda17Wo9x7EWIthZOUykw0PsZs8VzFUWkMbA6U0tDalP4x+Vak0SNd1+DydcD7XCCGUpRxh+aPPvyV5EUJMYFwUw1f20EPczjHC++1t/RFBjisbE8oEPmqKqu1xlRqUS1A+PbRhG99CFS6jQMMldIi/MwwBZFQGdc/QDAyjmaFDgvLxf0KE9BHT7MoS3E7u7TzjBqU9vJBK98iRAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="2022 06 06 00 25 07"
        title="2022 06 06 00 25 07"
        src="/b-log/static/0af9c1217a90dde978e0f4fdae006d85/fcda8/2022-06-06-00-25-07.png"
        srcset="/b-log/static/0af9c1217a90dde978e0f4fdae006d85/12f09/2022-06-06-00-25-07.png 148w,
/b-log/static/0af9c1217a90dde978e0f4fdae006d85/e4a3f/2022-06-06-00-25-07.png 295w,
/b-log/static/0af9c1217a90dde978e0f4fdae006d85/fcda8/2022-06-06-00-25-07.png 590w,
/b-log/static/0af9c1217a90dde978e0f4fdae006d85/efc66/2022-06-06-00-25-07.png 885w,
/b-log/static/0af9c1217a90dde978e0f4fdae006d85/c83ae/2022-06-06-00-25-07.png 1180w,
/b-log/static/0af9c1217a90dde978e0f4fdae006d85/1e5d2/2022-06-06-00-25-07.png 1630w"
        sizes="(max-width: 590px) 100vw, 590px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
  </a>
    </span>
í•œ ëˆˆì— ì•Œì•„ë³¼ë§Œí•œ ì´ë¦„ì„ ì ê³  ì „ì— ìƒì„±í•œ CodeDeploy ì—­í• ì„ ì„ íƒí•´ì£¼ì„¸ìš”</p>
</li>
<li>
<p>ë°°í¬ ìœ í˜•ì€ í˜„ì¬ ìœ„ì¹˜ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”</p>
</li>
<li>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/b-log/static/1bf848c31860dcfd9c444d00cfa6edaa/6ee58/2022-06-06-00-27-29.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 85.8108108108108%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAABYlAAAWJQFJUiTwAAAB8UlEQVQ4y41UiY7aMBTk/3+v3a3EbsuVEBJy2YlvO1O9R0gBLV0sjQxP9uQdM15V1RmbzRZd18N7D2stnHMvg85fobTGSgiJum4wDOPNgX8HjbF3l25hrEUIASFGxBg5tqILvZBoux5t26HrBXoheJfDsOxCDqCP01n6L+XA51JKmKYJE8AVrmIIMFpDSolxHCGkRN/3eHUx2TTxbyY8CY1j1aAsS5TVmQltiNAuwPoI7QOMj/CRMkmc0S2ILM2kTGhcgNIG/VyaUhq9jShHj1YHnEePanAYXZwz+jrLJUMq73DIkOdHFEWBQ5YhzzIc8/yyZxmauoYx+q7ERyyEddPgx883rNcf2O8P2B8yfP7+g91uj+1uj812B23McukZ6UKoteGxT1/UQjGtNcvhcQBPSyYtkTSUUtxcIqdmU5wyO5Ulsjxn0VI8pgQ765XMUDcta/COsO06Hgit6/SuxCRcEjztKU0X0kXIjj9MsYVwVArH4oT8WLBwY0wvae5pyZQ69ZGcQPaLcz8f9fYdFh36EDCQQ4RgtxBh+g/hVch3uCU0xoDKvjwO/jujLa64xZ1T6KV5f/+F9ccnyrLiLJvRIRcW5eAYhXTsGDW75dmialckAWIm0MtDUlHWYzAOo/UXGM8x6wO3hJ+sB1CcJv4X/6wvOJePGDMAAAAASUVORK5CYII='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="2022 06 06 00 27 29"
        title="2022 06 06 00 27 29"
        src="/b-log/static/1bf848c31860dcfd9c444d00cfa6edaa/fcda8/2022-06-06-00-27-29.png"
        srcset="/b-log/static/1bf848c31860dcfd9c444d00cfa6edaa/12f09/2022-06-06-00-27-29.png 148w,
/b-log/static/1bf848c31860dcfd9c444d00cfa6edaa/e4a3f/2022-06-06-00-27-29.png 295w,
/b-log/static/1bf848c31860dcfd9c444d00cfa6edaa/fcda8/2022-06-06-00-27-29.png 590w,
/b-log/static/1bf848c31860dcfd9c444d00cfa6edaa/efc66/2022-06-06-00-27-29.png 885w,
/b-log/static/1bf848c31860dcfd9c444d00cfa6edaa/c83ae/2022-06-06-00-27-29.png 1180w,
/b-log/static/1bf848c31860dcfd9c444d00cfa6edaa/6ee58/2022-06-06-00-27-29.png 1640w"
        sizes="(max-width: 590px) 100vw, 590px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
  </a>
    </span>
Amazon EC2 ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì„ íƒ í›„ ì•Œë§ì€ íƒœê·¸ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”</p>
</li>
<li>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/b-log/static/db12b0cf19189866a4a477cd7c57f4d4/6ee58/2022-06-06-00-30-08.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 44.5945945945946%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABYlAAAWJQFJUiTwAAABU0lEQVQoz4VSa4+DIBDk//+4S1qLWnu59KXVVpBaRQF1LuxZr/flSjJhWYbZF0xIiaK4QkqJsiwJRVEgTTNklwvZolLQXY++79E90XXQXUf7E03bgp3PKTiPEMVbJMkOYRQTeBhhm+ywTRJ8nTJcpcL9foesKiilYIyBcw7WWrL97gMwYy3cOKE3BsZYWE9yjrLxRO/3ttYardZomhZtqxe/507ThGEcKUtmtUYdrsB5iGDDsdmEWK0DfKwCrHmEgEdL1lEU033sq9l9Igg49vsDhJAk7oOwwVm4WuF2K5HnBfUzL65I5QOHskZeNS+ZGuqfoWrmc9dT5sMwkChT9QNlpVBVFfXHw1/+rolK+heeNU0UhKWiRnYpfvphLWGRmh940fnVfF4If3x+Hkz3PY7HE5XqpyeEQFkKavKr6DssguM4ksNat3wDN0/uKfhuvQp+AyPqtJJx+CwGAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="2022 06 06 00 30 08"
        title="2022 06 06 00 30 08"
        src="/b-log/static/db12b0cf19189866a4a477cd7c57f4d4/fcda8/2022-06-06-00-30-08.png"
        srcset="/b-log/static/db12b0cf19189866a4a477cd7c57f4d4/12f09/2022-06-06-00-30-08.png 148w,
/b-log/static/db12b0cf19189866a4a477cd7c57f4d4/e4a3f/2022-06-06-00-30-08.png 295w,
/b-log/static/db12b0cf19189866a4a477cd7c57f4d4/fcda8/2022-06-06-00-30-08.png 590w,
/b-log/static/db12b0cf19189866a4a477cd7c57f4d4/efc66/2022-06-06-00-30-08.png 885w,
/b-log/static/db12b0cf19189866a4a477cd7c57f4d4/c83ae/2022-06-06-00-30-08.png 1180w,
/b-log/static/db12b0cf19189866a4a477cd7c57f4d4/6ee58/2022-06-06-00-30-08.png 1640w"
        sizes="(max-width: 590px) 100vw, 590px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
  </a>
    </span>
CodeDeploy agentëŠ” ì´ë¯¸ ì„¤ì¹˜í–ˆìœ¼ë‹ˆ ì•ˆ í•¨ì„ ì„ íƒí•´ì£¼ì„¸ìš”</p>
</li>
<li>
<p>ë°°í¬ ê·¸ë£¹ì„ ìƒì„±í•©ë‹ˆë‹¤</p>
</li>
</ol>
<h2 id="ec2-ì—­í• -ì—°ê²°" style="position:relative;"><a href="#ec2-%EC%97%AD%ED%95%A0-%EC%97%B0%EA%B2%B0" aria-label="ec2 ì—­í•  ì—°ê²° permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>EC2 ì—­í•  ì—°ê²°</h2>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/b-log/static/95c6634cbe745f2f84155fd83ed28905/d0ab7/2022-06-06-00-16-14.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 30.405405405405407%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAqElEQVQY061QWw6DMAzr/W+3TfxObNqAtdCS0EJbHp5axA6AZsmxE0X+sKiqGpfrDUVR4P5qwG5CjAEhnKMgIjQfibbtUEuFThvEGE9TpGGdw7puOLBt22nmwHEc8S8IbQzKxxPa9OiJszIP2RPzz6cqiId8Sz9aGxhiKMOQmqB0D2sdxLwsmOcFPoSdfi/32A8/eY8QYtZUkVQKHVlU/YSytXgbh5T1BWJs0yAbxvIkAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="2022 06 06 00 16 14"
        title="2022 06 06 00 16 14"
        src="/b-log/static/95c6634cbe745f2f84155fd83ed28905/fcda8/2022-06-06-00-16-14.png"
        srcset="/b-log/static/95c6634cbe745f2f84155fd83ed28905/12f09/2022-06-06-00-16-14.png 148w,
/b-log/static/95c6634cbe745f2f84155fd83ed28905/e4a3f/2022-06-06-00-16-14.png 295w,
/b-log/static/95c6634cbe745f2f84155fd83ed28905/fcda8/2022-06-06-00-16-14.png 590w,
/b-log/static/95c6634cbe745f2f84155fd83ed28905/efc66/2022-06-06-00-16-14.png 885w,
/b-log/static/95c6634cbe745f2f84155fd83ed28905/c83ae/2022-06-06-00-16-14.png 1180w,
/b-log/static/95c6634cbe745f2f84155fd83ed28905/d0ab7/2022-06-06-00-16-14.png 1532w"
        sizes="(max-width: 590px) 100vw, 590px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
  </a>
    </span></p>
<p>CodeDeployë¡œ ë°°í¬í•  ì¸ìŠ¤í„´ìŠ¤ì˜ IAM ì—­í•  ìˆ˜ì •ì—ì„œ EC2ì— í•´ë‹¹í•˜ëŠ” ì—­í• ì„ ì ìš©í•´ì£¼ì„¸ìš”.</p>
<h2 id="appspecyml" style="position:relative;"><a href="#appspecyml" aria-label="appspecyml permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>appspec.yml</h2>
<div class="gatsby-highlight" data-language="yml"><pre style="counter-reset: linenumber NaN" class="language-yml line-numbers"><code class="language-yml"><span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token number">0.0</span>
<span class="token key atrule">os</span><span class="token punctuation">:</span> linux
<span class="token comment"># sourceì—ì„œ destination(ec2 instance)ë¡œ íŒŒì¼ë“¤ì„ ì˜®ê¹€</span>
<span class="token key atrule">files</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">source</span><span class="token punctuation">:</span> /
    <span class="token key atrule">destination</span><span class="token punctuation">:</span> /home/ec2<span class="token punctuation">-</span>user/temp

<span class="token comment"># ì‹¤í–‰í•  ìŠ¤í¬ë¦½íŠ¸ ì •ì˜</span>
<span class="token key atrule">hooks</span><span class="token punctuation">:</span>
  <span class="token key atrule">AfterInstall</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">location</span><span class="token punctuation">:</span> /scripts/build_docker.sh
  <span class="token key atrule">ApplicationStart</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">location</span><span class="token punctuation">:</span> /scripts/switch_docker.sh</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>appspec.ymlì€ ë°°í¬ ì‹œ CodeDeployê°€ í•  í–‰ë™ì„ ì •ì˜í•©ë‹ˆë‹¤.</p>
<p><figure class="gatsby-resp-image-figure" style="">
    <span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 485px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/b-log/static/9152e8f90004c9cbcc9fd5182e206bbe/44c61/2022-06-06-11-38-50.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 164.86486486486487%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAhCAYAAADZPosTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAFhElEQVRIx5WWfW/b1hnF/Z23romTtNma1vWb7DhNsKFAgWFfYH8UW7F1xbImjWPLerNEURL1RoqiRFGUSIoiJVL6DfcqcSy02FwCFyT4cnjuOc957t2Jlwni6FsmzVaTvmXR6Xbo6h2MXo80XbFer1ksE6ZTl6nn4Qe+HJ7n4fkeQRAwn8/lezvxMiVNlvTMHmbPwBpYNOoNDEPHNE3iRcwaWCQpYRigGwYVpYKm1Wk1NZSqsnkvjjaA0WLD8P1h2yPskbN1L12tmIVzVmlKFEWSpetOGLsunueziBckSSKfbQF+8+e/cPL0jOcvXvD02VfMo1jeXyYp7tRjHoYS6DBzyv5Rhs/39nn+x6+ZzUJms5kE34mEhus1qzVcFct8+90/+eu3f+f126zUTRxJmjL1fAkYzELeZvP87R//4rvvf5DfhPO5BPT9gJ14kbACuiOPcquH0rVQDZtqd0DDHLNcbwA9P2DizyioLRq9EZVWj4bpUO2YXGsGs3mE7/sbU8QHpu3S7dvUWjrXqoYxcNAHDkIS4fRUAHo+TcOiaQzIlVWuay1avQFtcyh/KNzeSddg9gccHJ+QOX0qNTw9eyY1/PLgiFKlKqcdziNyhRK7jz6V7xwcZTh79hUHR8c8/PT3NJqtjSmLZLV5uVShWFE5v8zxn5/eUlJqZAvX0ozVeo0fzDCtAT++ueAyX+L7f//Iy1dveHtV4NX5pawMoeOOKGxhSAhUOxaqPqBm2CidPtME0nemTDyPMFqgmQ7XDZ1CvYvaHVCqt+k6AfNosdFwsUxZLhN0a4Ru2VS1DkWljjEY0enbhFHMarWSLnvBDGvsMZwE1NoG7d6QoeszGPtyBtJlwU5M5cEnj7m/+5D9wyMyJ0959Mljfvu7ezcaupOpZNiyXPJqk0K9Q1nTKTZ0urZPOI/fMUxSojimrDao1DSyhTJvLnMo9SZFpYbnz6SGgqHQs97uSXbZkkKx2qDeNmh0evK5dFlomK7WBClo/TGlRpdiw6DatZgsYbkSSUlkaq7yRT77fI/jzAmHxxmOT07ltagGta5tXH4P6M2X+HEqNRL1GMQp03DJMl1JU4RGg+FIOl8oV3n5+pyfLq7ktUiLM3ZvuQw0+2POi1WyikZO0bgs16nqIxYppMLlqUcYL/FTqLRMVH0oq0GcgxXM3mu4KZs1fpRIlsIx3XIkQy9KSNL1TfSc8YRqo4OqdTi/KnJVqsiqUJtdqe+NhsLppuWSrWoUah2ZzZJm0Oi7kuFtDX/z0cfcf/CQvf1DqeO9+7vc231ITWt+0FA0xjhZYQ4dmRaRBL0/ZL5IJfskSWUN2s6YklKX1fDmMi8rolzTuK42GE+mG4a3++GzF3+SuRROfvbF/lY/lGURRkyXoHb6FOq6nEWtZ+Ml4M/mGw1vAzruBN3sY5gWA9uR7G73Q+G0PZ3heHO0bp+OOWTkhYymsw9JeQ+4fvfx9rENGMxjlHaf85JKTm1xpTS5rGi0BhPJfouhABRD5HYz1jc/uQGchdiTgNE0pKn3Zf4dyXDTyX8G+DN+W4CeZCi69EVZ5bLcIFdt3WT5Fxn+b8CNhiJJtuw2uuzU4tpypr+eoef7TIOQvNqWSREalptiPdGptE3J/u6AySbLQ3tE/lqRdfj6PMtFrii7lMizyHIgsnwXQNGAo3hBNl/go493yZyesXdwyFHmlL39A+49eERda31Iyl0Yiixv+qEhV8aLXIl8WaXW7G73w19lShihtC0q7b5cwxs9R55rPWe729wVUGw5vCDkWqnxw8tXctWr1psydsHsDkm5DSj6YRTNcV2XJ18e8uSLfR7/4QknZ88Jw1AOUQk7Ivj/D1DsvgQzsQMTwx5PMAe2HI47ldsQcV/U4n8BMkqEtR627fkAAAAASUVORK5CYII='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="hooks ë¼ì´í”„ ì‚¬ì´í´"
        title="hooks ë¼ì´í”„ ì‚¬ì´í´"
        src="/b-log/static/9152e8f90004c9cbcc9fd5182e206bbe/44c61/2022-06-06-11-38-50.png"
        srcset="/b-log/static/9152e8f90004c9cbcc9fd5182e206bbe/12f09/2022-06-06-11-38-50.png 148w,
/b-log/static/9152e8f90004c9cbcc9fd5182e206bbe/e4a3f/2022-06-06-11-38-50.png 295w,
/b-log/static/9152e8f90004c9cbcc9fd5182e206bbe/44c61/2022-06-06-11-38-50.png 485w"
        sizes="(max-width: 485px) 100vw, 485px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
  </a>
    </span>
    <figcaption class="gatsby-resp-image-figcaption">hooks ë¼ì´í”„ ì‚¬ì´í´</figcaption>
  </figure></p>
<p>hooksì˜ ì‹¤í–‰ ìˆœì„œëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤. ê·¸ë ‡ë‹¤ë©´ build_docker.sh ì‹¤í–‰ í›„ switch_docker.shë¥¼ ì‹¤í–‰í•˜ê²Œ ë˜ê² ë„¤ìš”.</p>
<h1 id="nginx" style="position:relative;"><a href="#nginx" aria-label="nginx permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Nginx</h1>
<h2 id="ì„¤ì¹˜-2" style="position:relative;"><a href="#%EC%84%A4%EC%B9%98-2" aria-label="ì„¤ì¹˜ 2 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ì„¤ì¹˜</h2>
<div class="gatsby-highlight" data-language="shell"><pre style="counter-reset: linenumber NaN" class="language-shell line-numbers"><code class="language-shell"><span class="token function">sudo</span> amazon-linux-extras <span class="token function">install</span> nginx1</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>
<h2 id="ì„¤ëª…-2" style="position:relative;"><a href="#%EC%84%A4%EB%AA%85-2" aria-label="ì„¤ëª… 2 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ì„¤ëª…</h2>
<div class="gatsby-highlight" data-language="conf"><pre style="counter-reset: linenumber NaN" class="language-conf line-numbers"><code class="language-conf">http {
    # ìš”ì²­ì„ ì „ë‹¬í•  ì£¼ì†Œë“¤ì˜ ì§‘í•©
    upstream backends {
        server localhost:3000;
        server localhost:3001;
    }

    server {
        listen       80;
        server_name  localhost;

        # / ë¡œ ë“¤ì–´ì˜¨ ìš”ì²­ì„ upstream backendë¡œ ì „ë‹¬
        location / {
            proxy_pass http://backends;
        }
    }
}</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>ìƒê°í•´ë³´ë©´ ì´ìƒí•˜ì§€ ì•Šë‚˜ìš”? ë¸”ë£¨ì™€ ê·¸ë¦°ì€ ê°ê° 3000, 3001 í¬íŠ¸ì—ì„œ ì‹¤í–‰ë˜ê³  ìˆëŠ”ë° ì‚¬ìš©ìëŠ” ëŒ€ì²´ ì–´ë–»ê²Œ ì ‘ê·¼í•´ì•¼ í• ê¹Œìš”? ë‘ í¬íŠ¸ë¥¼ ë˜ì ¸ì£¼ê³  í•˜ë‚˜ ì•ˆë˜ë©´ ë‹¤ë¥¸ ê±¸ë¡œ ì ‘ì†í•˜ë¼ê³  í•´ì•¼ í• ê¹Œìš”? ë§¤ë ¥ì ì¸ ì œì•ˆì´ì§€ë§Œ ì•ˆíƒ€ê¹ê²Œë„ ê·¸ê±´ ì§„ì •í•œ ë¬´ì¤‘ë‹¨ ë°°í¬ë¼ê³  ë³¼ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</p>
<p>Nginxê°€ ë“±ì¥í•  ì°¨ë¡€ì…ë‹ˆë‹¤. NginxëŠ” ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œ ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤. ì™¸ë¶€ì—ì„œ íŠ¹ì • ì£¼ì†Œë¡œ ë“¤ì–´ì˜¨ ìš”ì²­ì„ ë‹¤ë¥¸ ê³³ìœ¼ë¡œ ë³´ë‚´ì¤„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ ê³¼ì •ì—ì„œ ë¡œë“œ ë°¸ëŸ°ì„œì˜ ì—­í• ë„ ê²¸í•©ë‹ˆë‹¤. ë”°ë¡œ ì„¤ì •ì„ ì•ˆí•´ì¤¬ìœ¼ë‹ˆ Nginxì€ ë¼ìš´ë“œë¡œë¹ˆ ë°©ì‹ìœ¼ë¡œ ìš”ì²­ì„ ì „ë‹¬í•©ë‹ˆë‹¤. í•œ ë²ˆì€ localhost:3000ì—, í•œ ë²ˆì€ localhost:3001ì— ë§ì´ì£ .</p>
<p>í•œ ë²ˆ ë¸”ë£¨ì—ì„œ ì„œë¹„ìŠ¤ê°€ ì‹¤í–‰ë˜ê³  ìˆëŠ” ìƒíƒœì—ì„œ ìƒˆë¡œìš´ ë°°í¬ê°€ ë“¤ì–´ì™€ ê·¸ë¦°ì„ ì‹¤í–‰ ì‹œí‚¤ê³  ë¸”ë£¨ê°€ êº¼ì§€ëŠ” ìƒí™©ì„ ìƒê°í•´ ë³´ê² ìŠµë‹ˆë‹¤.</p>
<ol>
<li>NginxëŠ” ë¸”ë£¨ë¡œ ìš”ì²­ì„ ì „ë‹¬í•˜ê³  ìˆìŠµë‹ˆë‹¤</li>
<li>ê·¸ë¦°ì´ ì¼œì§‘ë‹ˆë‹¤</li>
<li>Nginxì€ ë¸”ë£¨ì™€ ê·¸ë¦°ì— ë²ˆê°ˆì•„ ìš”ì²­ì„ ì „ë‹¬í•©ë‹ˆë‹¤</li>
<li>ë¸”ë£¨ê°€ êº¼ì§‘ë‹ˆë‹¤</li>
<li>NginxëŠ” ì´ì œ ê·¸ë¦°ì—ë§Œ ìš”ì²­ì„ ì „ë‹¬í•©ë‹ˆë‹¤</li>
</ol>
<p>ì´ì œ ì‚¬ìš©ìëŠ” í•˜ë‚˜ì˜ ì£¼ì†Œì— ì ‘ì†í•´ë„ í•­ìƒ ì„±ê³µì ìœ¼ë¡œ ì„œë¹„ìŠ¤ì— ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<h1 id="ë§ˆë¬´ë¦¬" style="position:relative;"><a href="#%EB%A7%88%EB%AC%B4%EB%A6%AC" aria-label="ë§ˆë¬´ë¦¬ permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ë§ˆë¬´ë¦¬</h1>
<blockquote>
<p>ğŸ”­ <strong>Reference</strong> <a href="https://docs.nginx.com/nginx/admin-guide/load-balancer/http-health-check/">https://docs.nginx.com/nginx/admin-guide/load-balancer/http-health-check/</a></p>
</blockquote>
<p>ì‚¬ì‹¤ ì‚½ì§ˆì„ ì¢€ ë§ì´ í–ˆìŠµë‹ˆë‹¤. ì²˜ìŒì—” S3ì— ì½”ë“œë¥¼ ì—…ë¡œë“œí•˜ì§€ ì•Šê³  Github Actionsì—ì„œ ë„ì»¤ ì´ë¯¸ì§€ë¥¼ ë¹Œë“œí•œ ë‹¤ìŒì— ë„ì»¤ ì €ì¥ì†Œì— í‘¸ì‹œí•˜ê³  ë°°í¬ ë•Œ ê°€ì ¸ì˜¤ëŠ” ê±¸ ìƒê°í–ˆì—ˆìŠµë‹ˆë‹¤. ê·¸ëŸ° ì™€ì¤‘ì— ë„ì „í•´ë³´ëŠ” ê¹€ì— ì‹¹ ë‹¤ í›‘ì–´ë³´ë ¤ê³  S3ì— ì—…ë¡œë“œí•˜ëŠ” ë°©í–¥ìœ¼ë¡œ í‹€ì—ˆëŠ”ë° ê½¤ ë§Œì¡±ìŠ¤ëŸ½ë„¤ìš”. ëª‡ ë²ˆ ë°°í¬ë¥¼ ëŒë ¤ë³´ë©´ì„œ S3ì— zipì´ ì¢€ ìŒ“ì˜€ëŠ”ë° ê·¸ê±° ë‘˜ëŸ¬ë³´ëŠ” ì¬ë¯¸ê°€ ì ì í•©ë‹ˆë‹¤.</p>
<p>ì‚¬ì‹¤ ë¸”ë£¨-ê·¸ë¦° ë°©ì‹ì˜ ê°œë…ì€ êµ‰ì¥íˆ ì‰½ìŠµë‹ˆë‹¤. ì›ë˜ ëŒì•„ê°€ëŠ” ê±´ ê°€ë§Œíˆ ë†”ë‘ê³  ë‹¤ë¥¸ ê³³ì— ë°°í¬í•œ ë‹¤ìŒì— ë°”ê¿”ì¹˜ê¸°í•˜ë©´ ì™„ì „ ë¬´ì¤‘ë‹¨ ë°°í¬ ì•„ë‹ˆì—ìš”? ë§ìŠµë‹ˆë‹¤. ê·¸ê²Œ ë¬´ì¤‘ë‹¨ ë°°í¬ì£ !
ê·¸ëŸ¬ë‚˜ ì–¸ì œë‚˜ ê·¸ë ‡ë“¯ì´ ì‹¤ì œ êµ¬í˜„ìœ¼ë¡œ ê°€ëŠ” ê¸¸ì€ ê³¼ì† ë°©ì§€í„±ì´ ì”ëœ© ë°•í˜€ìˆìŠµë‹ˆë‹¤. ê¸€ë¡œ ì •ë¦¬í•˜ë©´ ìƒê°ë³´ë‹¤ ì§§ì€ ê³¼ì •ì¸ë° ì‹¤ì œëŠ” ì‹œê°„ì´ ê½¤ ê±¸ë¦° ê²ƒ ì²˜ëŸ¼ìš”.
í•œ ë²ˆì€ ì‹¤ë§ˆë¦¬ê°€ ë³´ì—¬ì„œ ì—‘ì…€ì„ ì”ëœ© ë°Ÿì€ ì ë„ ìˆëŠ”ë° ê½¤ í˜¼ë‚¬ìŠµë‹ˆë‹¤. ê³¼ì† ë°©ì§€í„±ì´ ì—­ì‹œ ë¬´ì„­ê¸´ ë¬´ì„­ìŠµë‹ˆë‹¤.</p>
<p>Health Checkì— ëŒ€í•œ ê²ƒë„ ë§í•˜ì§€ ì•Šì„ ìˆ˜ ì—†ë„¤ìš”. Nginx Open SourceëŠ” Passive Health Checkë§Œ ì§€ì›í•©ë‹ˆë‹¤. ì™¸ë¶€ì—ì„œ ìš”ì²­ì´ ë“¤ì–´ì™”ì„ ë•Œë§Œ Health Checkê°€ ê°€ëŠ¥í•˜ì£ . ì¼ì • ì£¼ê¸°ë¡œ í™•ì¸í•´ì£¼ëŠ” Active Health CheckëŠ” Nginx Plusì—ì„œë§Œ ì œê³µë©ë‹ˆë‹¤.
Active Health Checkì— ëŒ€í•´ ì§„ì§€í•˜ê²Œ ìƒê°í•˜ê³  ìˆë‹¤ë©´ Nginx Plusë¥¼ ê²°ì œí•˜ê±°ë‚˜ ì²˜ìŒë¶€í„° í•´ë‹¹ ê¸°ëŠ¥ì„ ì§€ì›í•˜ëŠ” HAProxyë¥¼ ì°¾ì•„ë³´ì„¸ìš”.</p>
<p>ê·¸ë ‡ìŠµë‹ˆë‹¤. ìƒê°ë³´ë‹¤ ë§ì´ ê¸¸ì–´ì¡Œë„¤ìš”. ì´ ê¸€ì´ ì—¬ëŸ¬ë¶„ë“¤ì—ê²Œ ë„ì›€ì´ ëìœ¼ë©´ ì¢‹ê² ìŠµë‹ˆë‹¤. ê·¸ëŸ¼ ì´ë§Œ!</p></section></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/CICDë¥¼ ì´ìš©í•œ ë¬´ì¤‘ë‹¨ ë°°í¬ëŠ” ì–´ë–»ê²Œ í•´ì•¼ í• ê¹Œìš”/";window.___webpackCompilationHash="fae867cc0ea84673653c";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-9b448caf838dbc18971d.js"],"app":["/app-423680434a9201db7ee2.js"],"component---src-pages-404-tsx":["/component---src-pages-404-tsx-1013cbdf27b7225f497f.js"],"component---src-pages-index-js":["/component---src-pages-index-js-d79b3eb9493dac81784f.js"],"component---src-templates-blog-post-js":["/component---src-templates-blog-post-js-549bf8357642c940d19b.js"],"component---src-templates-tag-page-js":["/component---src-templates-tag-page-js-407c8a7c33abc6ac453d.js"]};/*]]>*/</script><script src="/b-log/polyfill-9b448caf838dbc18971d.js" nomodule=""></script><script src="/b-log/component---src-templates-blog-post-js-549bf8357642c940d19b.js" async=""></script><script src="/b-log/8c818aafd19f020a43cdd28cb6a1c8df7d18c0d2-0fdccc7611a7c55272d7.js" async=""></script><script src="/b-log/app-423680434a9201db7ee2.js" async=""></script><script src="/b-log/framework-2c67c8bfa55bfd760b60.js" async=""></script><script src="/b-log/webpack-runtime-76465a399045a41f636f.js" async=""></script></body></html>